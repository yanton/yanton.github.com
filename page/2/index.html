<!doctype html>
<html class="theme-next use-motion theme-next-next">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>




  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.1"/>





    <meta name="keywords" content="Hexo,next" />





    <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.1" />




  <title> 觉知此事要躬行 </title>
</head>

<body>
  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">觉知此事要躬行</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>


  <ul id="menu" class="menu">
    
    
      
      <li class="menu-item menu-item-home">
        <a href="/">
          <i class="menu-item-icon icon-home"></i> <br />
          首頁
        </a>
      </li>
    
      
      <li class="menu-item menu-item-archives">
        <a href="/archives">
          <i class="menu-item-icon icon-archives"></i> <br />
          歸檔
        </a>
      </li>
    
      
      <li class="menu-item menu-item-tags">
        <a href="/tags">
          <i class="menu-item-icon icon-tags"></i> <br />
          標籤
        </a>
      </li>
    
  </ul>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
            
          

          <div id="posts" class="posts-expand">
            
  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2014/09/04/7K面试之交通灯/">
                7K面试之交通灯
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            發表於 2014-09-04
          
        </span>

        
          
        

        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <h2 id="需求">需求</h2><p>模拟实现十字路口的交通灯管理系统逻辑，具体需求如下：</p>
<p>异步随机生成按照各个路线行驶的车辆。<br>例如：</p>
<ul>
<li>由南向而来去往北向的车辆 —— 直行车辆</li>
<li>由西向而来去往南向的车辆 —— 右转车辆</li>
<li>由东向而来去往南向的车辆 —— 左转车辆</li>
<li>。。。</li>
</ul>
<p>信号灯忽略黄灯，只考虑红灯和绿灯。</p>
<p>应考虑左转车辆控制信号灯，右转车辆不受信号灯控制。</p>
<p>具体信号灯控制逻辑与现实生活中普通交通灯控制逻辑相同，不考虑特殊情况下的控制逻辑。</p>
<p>注：南北向车辆与东西向车辆交替放行，同方向等待车辆应先放行直行车辆而后放行左转车辆。</p>
<p>每辆车通过路口时间为1秒（提示：可通过线程Sleep的方式模拟）。</p>
<p>随机生成车辆时间间隔以及红绿灯交换时间间隔自定，可以设置。</p>
<p>不要求实现GUI，只考虑系统逻辑实现，可通过Log方式展现程序运行结果。</p>
<h2 id="分析">分析</h2><p>拿到需求之后不要急于编码，要先分析需求，理清思路。</p>
<p>我们看需求中的关键词</p>
<ol>
<li>车</li>
<li>交通灯</li>
</ol>
<p>进一步分析，车是在路上行走，所以需要一条路作为车的载体，而需求中对车没有额外要求，此处可以考虑用字符串表示车。</p>
<p>现在关键词变更为</p>
<ol>
<li>道路</li>
<li>交通灯</li>
</ol>
<p>下面我们依次分析：</p>
<h3 id="路">路</h3><p>路是车的载体，需要有一个集合，里面是路上的车</p>
<p>需要一个方法，判断灯的状态，若绿灯，则让最前面的车通过</p>
<p>还需要一个方法随机的添加车辆</p>
<h3 id="交通灯">交通灯</h3><p>十字路口，除了四个正方向的路，还需要考虑每个方向的左转和右转，硬想是会把脑袋想爆的，这个时候祭出我们的大杀器：画图</p>
<p>我偷个懒，直接用张老师的图了</p>
<p><img src="http://xinjue.qiniudn.com/github%2F201409%2Ftrafficroad.jpg" alt="张老师的交通灯分析图"></p>
<p>细数一下，一共有12条线路，我们只需将交通灯跟这12条线路对应起来。</p>
<p>由于12条线路是定死的，不需要改变，我们用枚举类的方式来实现。</p>
<p>交通灯有两种状态，红和绿，可以用一个布尔变量来表示</p>
<h3 id="其它">其它</h3><p>有了路和灯，我们还需要一个控制器来控制交通灯</p>
<h2 id="边编码，边完善">边编码，边完善</h2><h3 id="Road类">Road类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xinjue.traffic;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ScheduledExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"><span class="javadoc">/**</span><br><span class="line"> *<span class="javadoctag"> @author</span> 学习张老师的代码 通过看视频了解思路，手打代码并添加注释增加熟悉度</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Road</span> </span>&#123;</span><br><span class="line">	<span class="comment">//车辆的集合</span></span><br><span class="line">	<span class="keyword">private</span> List&lt;String&gt; vechicles = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">	<span class="comment">//路的名称，用来区分方向</span></span><br><span class="line">	<span class="keyword">private</span> String name = <span class="keyword">null</span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Road</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="comment">// 模拟车辆不断随机上路的过程</span></span><br><span class="line">		ExecutorService pool = Executors.newSingleThreadExecutor();</span><br><span class="line">		pool.execute(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">				<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">					<span class="keyword">try</span> &#123;</span><br><span class="line">						<span class="comment">//随机数1-10</span></span><br><span class="line">						Thread.sleep((<span class="keyword">new</span> Random().nextInt(<span class="number">10</span>) + <span class="number">1</span>) * <span class="number">1000</span>);</span><br><span class="line">					&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="comment">//添加车辆</span></span><br><span class="line">					vechicles.add(Road.<span class="keyword">this</span>.name + <span class="string">"_"</span> + i);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 定时器：每隔一秒检查对应的灯是否为绿，是则放行一辆车</span></span><br><span class="line">		ScheduledExecutorService timer = Executors.newScheduledThreadPool(<span class="number">1</span>);</span><br><span class="line">		timer.scheduleAtFixedRate(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">				<span class="keyword">if</span> (vechicles.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">					<span class="keyword">boolean</span> lighted = Lamp.valueOf(Road.<span class="keyword">this</span>.name).isLighted();</span><br><span class="line">					<span class="keyword">if</span> (lighted) &#123;</span><br><span class="line">						System.out.println(vechicles.remove(<span class="number">0</span>)</span><br><span class="line">								+ <span class="string">" is traversing !"</span>);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;, <span class="number">1</span>, <span class="number">1</span>, TimeUnit.SECONDS);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Lamp类">Lamp类</h3><ul>
<li>每个Lamp元素代表一个方向上的灯，总共有12个方向，所有总共有12个Lamp元素。</li>
<li>有如下一些方向上的灯,每两个形成一组，一组灯同时变绿或变红，所以，</li>
<li>程序代码只需要控制每组灯中的一个灯即可：</li>
<li>s2n,n2s</li>
<li>s2w,n2e</li>
<li>e2w,w2e</li>
<li>e2s,w2n</li>
<li>s2e,n2w</li>
<li>e2n,w2s</li>
<li>上面最后两行的灯是虚拟的，由于从南向东和从西向北、以及它们的对应方向不受红绿灯的控制，</li>
<li>所以，可以假想它们总是绿灯。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xinjue.traffic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Lamp &#123;</span><br><span class="line">	<span class="comment">/*每个枚举元素各表示一个方向的控制灯*/</span></span><br><span class="line">	S2N(<span class="string">"N2S"</span>,<span class="string">"S2W"</span>,<span class="keyword">false</span>),S2W(<span class="string">"N2E"</span>,<span class="string">"E2W"</span>,<span class="keyword">false</span>),E2W(<span class="string">"W2E"</span>,<span class="string">"E2S"</span>,<span class="keyword">false</span>),E2S(<span class="string">"W2N"</span>,<span class="string">"S2N"</span>,<span class="keyword">false</span>),</span><br><span class="line">	<span class="comment">/*下面元素表示与上面的元素的相反方向的灯，它们的“相反方向灯”和“下一个灯”应忽略不计！*/</span></span><br><span class="line">	N2S(<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">false</span>),N2E(<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">false</span>),W2E(<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">false</span>),W2N(<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">false</span>),</span><br><span class="line">	<span class="comment">/*由南向东和由西向北等右拐弯的灯不受红绿灯的控制，所以，可以假想它们总是绿灯*/</span></span><br><span class="line">	S2E(<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">true</span>),E2N(<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">true</span>),N2W(<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">true</span>),W2S(<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Lamp</span><span class="params">(String opposite,String next,<span class="keyword">boolean</span> lighted)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.opposite = opposite;</span><br><span class="line">		<span class="keyword">this</span>.next = next;</span><br><span class="line">		<span class="keyword">this</span>.lighted = lighted;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*当前灯是否为绿*/</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> lighted;</span><br><span class="line">	<span class="comment">/*与当前灯同时为绿的对应方向*/</span></span><br><span class="line">	<span class="keyword">private</span> String opposite;</span><br><span class="line">	<span class="comment">/*当前灯变红时下一个变绿的灯*/</span></span><br><span class="line">	<span class="keyword">private</span> String next;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isLighted</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> lighted;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="javadoc">/**</span><br><span class="line">	 * 某个灯变绿时，它对应方向的灯也要变绿</span><br><span class="line">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">light</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.lighted = <span class="keyword">true</span>;</span><br><span class="line">		<span class="keyword">if</span>(opposite != <span class="keyword">null</span>)&#123;</span><br><span class="line">			Lamp.valueOf(opposite).light();</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(name() + <span class="string">" lamp is green，下面总共应该有6个方向能看到汽车穿过！"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="javadoc">/**</span><br><span class="line">	 * 某个灯变红时，对应方向的灯也要变红，并且下一个方向的灯要变绿</span><br><span class="line">	 *<span class="javadoctag"> @return</span> 下一个要变绿的灯</span><br><span class="line">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Lamp <span class="title">blackOut</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.lighted = <span class="keyword">false</span>;</span><br><span class="line">		<span class="keyword">if</span>(opposite != <span class="keyword">null</span>)&#123;</span><br><span class="line">			Lamp.valueOf(opposite).blackOut();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		Lamp nextLamp= <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">if</span>(next != <span class="keyword">null</span>)&#123;</span><br><span class="line">			nextLamp = Lamp.valueOf(next);</span><br><span class="line">			System.out.println(<span class="string">"绿灯从"</span> + name() + <span class="string">"--------&gt;切换为"</span> + next);</span><br><span class="line">			nextLamp.light();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> nextLamp;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="LampController类">LampController类</h3><p>此类主要功能是定时改变灯状态</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xinjue.traffic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ScheduledExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LampController</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Lamp currentLamp;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">LampController</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="comment">//刚开始让由南向北的灯变绿;</span></span><br><span class="line">		currentLamp = Lamp.S2N;</span><br><span class="line">		currentLamp.light();</span><br><span class="line">		<span class="comment">/*每隔10秒将当前绿灯变为红灯，并让下一个方向的灯变绿*/</span></span><br><span class="line">		ScheduledExecutorService timer =  Executors.newScheduledThreadPool(<span class="number">1</span>);</span><br><span class="line">		timer.scheduleAtFixedRate(</span><br><span class="line">				<span class="keyword">new</span> Runnable()&#123;</span><br><span class="line">					<span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">						System.out.println(<span class="string">"来啊"</span>);</span><br><span class="line">						currentLamp = currentLamp.blackOut();</span><br><span class="line">				&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				<span class="number">10</span>,</span><br><span class="line">				<span class="number">10</span>,</span><br><span class="line">				TimeUnit.SECONDS);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序入口">程序入口</h3><p>完成上面的共组，我们的交通灯管理系统几乎已经搞定，现在需要一个入口，创建出12条路，然后将整个逻辑串起来并执行。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xinjue.traffic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainClass</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">/*产生12个方向的路线*/</span></span><br><span class="line">		String [] directions = <span class="keyword">new</span> String[]&#123;</span><br><span class="line">				<span class="string">"S2N"</span>,<span class="string">"S2W"</span>,<span class="string">"E2W"</span>,<span class="string">"E2S"</span>,<span class="string">"N2S"</span>,<span class="string">"N2E"</span>,<span class="string">"W2E"</span>,<span class="string">"W2N"</span>,<span class="string">"S2E"</span>,<span class="string">"E2N"</span>,<span class="string">"N2W"</span>,<span class="string">"W2S"</span></span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;directions.length;i++)&#123;</span><br><span class="line">			<span class="keyword">new</span> Road(directions[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">/*产生整个交通灯系统*/</span></span><br><span class="line">		<span class="keyword">new</span> LampController();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="运行结果">运行结果</h2><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">N2S lamp <span class="keyword">is</span> green，下面总共应该有<span class="number">6</span>个方向能看到汽车穿过！</span><br><span class="line">S2N lamp <span class="keyword">is</span> green，下面总共应该有<span class="number">6</span>个方向能看到汽车穿过！</span><br><span class="line">S2N_1 <span class="keyword">is</span> traversing !</span><br><span class="line">S2N_2 <span class="keyword">is</span> traversing !</span><br><span class="line">N2S_1 <span class="keyword">is</span> traversing !</span><br><span class="line">N2S_2 <span class="keyword">is</span> traversing !</span><br><span class="line">N2W_1 <span class="keyword">is</span> traversing !</span><br><span class="line">E2N_1 <span class="keyword">is</span> traversing !</span><br><span class="line">W2S_1 <span class="keyword">is</span> traversing !</span><br><span class="line">S2N_3 <span class="keyword">is</span> traversing !</span><br><span class="line">W2S_2 <span class="keyword">is</span> traversing !</span><br><span class="line">来啊</span><br><span class="line">绿灯从S2N<span class="comment">--------&gt;切换为S2W</span></span><br><span class="line">N2E lamp <span class="keyword">is</span> green，下面总共应该有<span class="number">6</span>个方向能看到汽车穿过！</span><br><span class="line">S2W lamp <span class="keyword">is</span> green，下面总共应该有<span class="number">6</span>个方向能看到汽车穿过！</span><br><span class="line">S2W_1 <span class="keyword">is</span> traversing !</span><br><span class="line">E2N_2 <span class="keyword">is</span> traversing !</span><br><span class="line">S2E_1 <span class="keyword">is</span> traversing !</span><br><span class="line">N2E_1 <span class="keyword">is</span> traversing !</span><br><span class="line">S2W_2 <span class="keyword">is</span> traversing !</span><br><span class="line">N2W_2 <span class="keyword">is</span> traversing !</span><br><span class="line">N2E_2 <span class="keyword">is</span> traversing !</span><br><span class="line">N2E_3 <span class="keyword">is</span> traversing !</span><br><span class="line">W2S_3 <span class="keyword">is</span> traversing !</span><br><span class="line">S2E_2 <span class="keyword">is</span> traversing !</span><br><span class="line">N2W_3 <span class="keyword">is</span> traversing !</span><br><span class="line">W2S_4 <span class="keyword">is</span> traversing !</span><br><span class="line">S2W_3 <span class="keyword">is</span> traversing !</span><br><span class="line">N2W_4 <span class="keyword">is</span> traversing !</span><br><span class="line">N2E_4 <span class="keyword">is</span> traversing !</span><br><span class="line">来啊</span><br><span class="line">绿灯从S2W<span class="comment">--------&gt;切换为E2W</span></span><br><span class="line">W2E lamp <span class="keyword">is</span> green，下面总共应该有<span class="number">6</span>个方向能看到汽车穿过！</span><br><span class="line">E2W lamp <span class="keyword">is</span> green，下面总共应该有<span class="number">6</span>个方向能看到汽车穿过！</span><br><span class="line">E2W_1 <span class="keyword">is</span> traversing !</span><br><span class="line">E2N_3 <span class="keyword">is</span> traversing !</span><br><span class="line">W2E_1 <span class="keyword">is</span> traversing !</span><br><span class="line">W2E_2 <span class="keyword">is</span> traversing !</span><br><span class="line">E2W_2 <span class="keyword">is</span> traversing !</span><br><span class="line">E2W_3 <span class="keyword">is</span> traversing !</span><br><span class="line">W2S_5 <span class="keyword">is</span> traversing !</span><br><span class="line">W2E_3 <span class="keyword">is</span> traversing !</span><br><span class="line">S2E_3 <span class="keyword">is</span> traversing !</span><br></pre></td></tr></table></figure>
<h2 id="总结">总结</h2><ol>
<li>理清逻辑在编码</li>
<li>画图有助于理清思路</li>
<li>面向对象中，谁拥有数据，谁就对外提供操作数据的方法</li>
<li>脸皮要后，不能忽略了女朋友</li>
</ol>

          
        
      </div>
    

    
      <div class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/交通灯/">
                #交通灯
              </a>
            
              <a href="/tags/面试题/">
                #面试题
              </a>
            
          </div>
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2014/09/03/Java反射机制/">
                Java反射机制
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            發表於 2014-09-03
          
        </span>

        
          
        

        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <p>在Java中较为重要的就是反射机制，那什么是反射机制呢？举个简单的例子来说，正常情况下如果已经有一个类，则肯定可以通过类创建对象，那么如果现在有求通过一个对象找到一个类名，此时就需要用到反射机制。</p>
<p>在反射操作的学习中，一个核心概念「一切的操作都将使用Object类完成，类、数组的引用都可以使用Object进行接收」</p>
<h2 id="认识Class类">认识Class类</h2><p><img src="http://xinjue.qiniudn.com/github%2F201409%2Ffsgc.jpg" alt="反射过程"></p>
<p>Java程序中的各个Java类属于同一类事物，描述这类事物的类名就是Class。Class类描述了类的名字，访问属性，类所属包名，字段名称列表，方法名称列表，等等</p>
<p>三种实例化Class类对象的方式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xinjue;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">X</span></span>&#123;</span><br><span class="line">	<span class="comment">//定义X类</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetClassDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Class&lt;?&gt; c1 = <span class="keyword">null</span>;</span><br><span class="line">		Class&lt;?&gt; c2 = <span class="keyword">null</span>;</span><br><span class="line">		Class&lt;?&gt; c3 = <span class="keyword">null</span>;</span><br><span class="line">		<span class="comment">//最常用的方式</span></span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			c1 = Class.forName(<span class="string">"com.xinjue.X"</span>);</span><br><span class="line">		&#125;<span class="keyword">catch</span>(ClassNotFoundException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		c2 = <span class="keyword">new</span> X().getClass(); <span class="comment">//通过Object类中的方法实例化</span></span><br><span class="line">		c3 = X.class;  <span class="comment">//通过类.class实例化</span></span><br><span class="line">		System.out.println(<span class="string">"类名称："</span>+c1.getName());</span><br><span class="line">		System.out.println(<span class="string">"类名称："</span>+c2.getName());</span><br><span class="line">		System.out.println(<span class="string">"类名称："</span>+c3.getName());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果是：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">类名称：com<span class="class">.xinjue</span><span class="class">.X</span></span><br><span class="line">类名称：com<span class="class">.xinjue</span><span class="class">.X</span></span><br><span class="line">类名称：com<span class="class">.xinjue</span><span class="class">.X</span></span><br></pre></td></tr></table></figure>
<p>下面是Class类常用方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//传入完整的"包.类"名成实例化Class对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Class&lt;?&gt; forName(String className) <span class="keyword">throws</span> ClassNotFoundException</span><br><span class="line"><span class="comment">//得到一个类中的全部构造方法</span></span><br><span class="line"><span class="keyword">public</span> Constructor[] getConstructors() <span class="keyword">throws</span> SecurityException</span><br><span class="line"><span class="comment">//得到本类中单独定义的全部属性</span></span><br><span class="line"><span class="keyword">public</span> Field[] getDeclaredFields() <span class="keyword">throws</span> SecurityException</span><br><span class="line"><span class="comment">//取得本类继承而来的全部属性</span></span><br><span class="line"><span class="keyword">public</span> Field[] getFields() <span class="keyword">throws</span> SecurityException</span><br><span class="line"><span class="comment">//取得一个类中的全部方法</span></span><br><span class="line"><span class="keyword">public</span> Method[] getMethods() <span class="keyword">throws</span> SecurityException</span><br><span class="line"><span class="comment">//返回一个Method对象，并设置一个方法中的所有参数类型</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Method <span class="title">getMethod</span><span class="params">(String name, Class...parameterTypes)</span> <span class="keyword">throws</span> NoSuchMethodException, SecurityException</span><br><span class="line"><span class="comment">//得到一个类中所实现的全部接口</span></span><br><span class="line"><span class="keyword">public</span> Class[] <span class="title">getInterfaces</span><span class="params">()</span></span><br><span class="line"><span class="comment">//得到一个类完整的"包.类"名称</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span><br><span class="line"><span class="comment">//根据Class定义的类实例化对象</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title">newInstance</span><span class="params">()</span> <span class="keyword">throws</span> InstantiationException, IllegalAccessException</span></span><br></pre></td></tr></table></figure>
<h2 id="Class类的使用">Class类的使用</h2><p>Class类最大的作用就是实例化对象操作，即可以通过一个给定的字符串(此字符串包含了完整的”包.类”的路径)来实例化一个类的对象。</p>
<h3 id="调用无参构造方法实例化">调用无参构造方法实例化</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xinjue;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Man</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"姓名："</span>+<span class="keyword">this</span>.name+<span class="string">", 年龄"</span>+<span class="keyword">this</span>.age;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReflectDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Class&lt;?&gt; c1 = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			c1 = Class.forName(<span class="string">"com.xinjue.Man"</span>);</span><br><span class="line">		&#125;<span class="keyword">catch</span>(ClassNotFoundException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		Man man = <span class="keyword">null</span>; <span class="comment">//声明Man</span></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			man = (Man)c1.newInstance();<span class="comment">//实例化</span></span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		man.setAge(<span class="number">30</span>);</span><br><span class="line">		man.setName(<span class="string">"隔壁老王"</span>);</span><br><span class="line">		System.out.println(man);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong><br>被实例化对象的类中必须存在无参的构造方法，如果不存在，则无法被实例化。</p>
</blockquote>
<h3 id="调用有参的构造方法实例化对象">调用有参的构造方法实例化对象</h3><p>如果类中没有无参构造方法，可以通过下面思路来实例化</p>
<ol>
<li>通过Class类的getConstructors()方法得到本类的所有构造方法</li>
<li>向构造方法中传递一个对象数组，里面包含了构造方法所需的参数</li>
<li>通过Constructor实例化对象</li>
</ol>
<p>此处用到了Constructor类，此类中有如下方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//想构造方法中传递参数，实例化对象</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">newInstance</span><span class="params">(Object...initargs)</span> <span class="keyword">throws</span> InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException</span></span><br></pre></td></tr></table></figure>
<p>调用有参的构造方法实例化对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xinjue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Man</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Man</span><span class="params">(String name, <span class="keyword">int</span> age)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.setName(name);</span><br><span class="line">		<span class="keyword">this</span>.setAge(age);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"姓名："</span>+<span class="keyword">this</span>.name+<span class="string">", 年龄"</span>+<span class="keyword">this</span>.age;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReflectDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Class&lt;?&gt; c1 = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			c1 = Class.forName(<span class="string">"com.xinjue.Man"</span>);</span><br><span class="line">		&#125;<span class="keyword">catch</span>(ClassNotFoundException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		Man man = <span class="keyword">null</span>; <span class="comment">//声明Man</span></span><br><span class="line">		Constructor&lt;?&gt; cons[] = <span class="keyword">null</span>; <span class="comment">//声明一个表示构造方法的数组</span></span><br><span class="line">		cons = c1.getConstructors();</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			man = (Man)cons[<span class="number">0</span>].newInstance(<span class="string">"隔壁老王"</span>,<span class="number">40</span>);<span class="comment">//只有一个构造方法，所以下角标是0</span></span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(man);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果是：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">姓名：隔壁老王, 年龄40</span><br></pre></td></tr></table></figure>
<h2 id="反射的应用—-取得类的结构">反射的应用—-取得类的结构</h2><p>通过反射得到一个类的完整结构，需要使用到java.lang.reflect包中的以下几个类</p>
<ul>
<li>Constructor：表示类中的构造方法</li>
<li>Field：表示类中的属性(字段)</li>
<li>Method：表示类中的方法</li>
</ul>
<p>这三个类都是AccessibleObject类的子类</p>
<p>在反射操作之前，我们先修改一下Man类的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">China</span></span>&#123;  <span class="comment">//定义China接口</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String NATIONAL = <span class="string">"China"</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String AUTHOR = <span class="string">"隔壁老王"</span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayChina</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">(String name, <span class="keyword">int</span> age)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Man</span> <span class="keyword">implements</span> <span class="title">China</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Man</span><span class="params">()</span></span>&#123;&#125; <span class="comment">//无参构造方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Man</span><span class="params">(String name)</span></span>&#123; <span class="comment">//有一个参数的构造方法</span></span><br><span class="line">		<span class="keyword">this</span>.setName(name);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Man</span><span class="params">(String name, <span class="keyword">int</span> age)</span></span>&#123; <span class="comment">//两个参数的构造方法</span></span><br><span class="line">		<span class="keyword">this</span>.setName(name);</span><br><span class="line">		<span class="keyword">this</span>.setAge(age);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"姓名："</span>+<span class="keyword">this</span>.name+<span class="string">", 年龄"</span>+<span class="keyword">this</span>.age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayChina</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"作者："</span>+AUTHOR+<span class="string">", 国籍："</span>+NATIONAL);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name+<span class="string">"你好，我今年"</span>+age+<span class="string">"岁了。"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="取得类中的属性，方法等">取得类中的属性，方法等</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Modifier;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReflectDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Class&lt;?&gt; c1 = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			c1 = Class.forName(<span class="string">"com.xinjue.Man"</span>);</span><br><span class="line">		&#125;<span class="keyword">catch</span>(ClassNotFoundException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		fen();</span><br><span class="line">		<span class="comment">//取得全部接口</span></span><br><span class="line">		Class&lt;?&gt; c[] = c1.getInterfaces(); </span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;c.length; i++)&#123;</span><br><span class="line">			System.out.println(<span class="string">"实现的接口名称："</span>+c[i].getName());</span><br><span class="line">		&#125;</span><br><span class="line">		fen();</span><br><span class="line">		<span class="comment">//取得父类</span></span><br><span class="line">		Class&lt;?&gt; c2 = c1.getSuperclass();</span><br><span class="line">		System.out.println(<span class="string">"父类名称："</span>+c2.getName());</span><br><span class="line">		<span class="comment">//取得全部构造方法</span></span><br><span class="line">		fen();</span><br><span class="line">		Constructor&lt;?&gt; cons[] = <span class="keyword">null</span>; </span><br><span class="line">		cons = c1.getConstructors();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;cons.length; i++)&#123;</span><br><span class="line">			System.out.println(<span class="string">"构造方法："</span>+cons[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//取得全部方法</span></span><br><span class="line">		fen();</span><br><span class="line">		Method m[] = c1.getMethods();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;m.length; i++)&#123;</span><br><span class="line">			Class&lt;?&gt; r = m[i].getReturnType(); <span class="comment">//返回值类型</span></span><br><span class="line">			Class&lt;?&gt; p[] = m[i].getParameterTypes(); <span class="comment">//参数类型</span></span><br><span class="line">			<span class="keyword">int</span> xx = m[i].getModifiers(); <span class="comment">//方法修饰符</span></span><br><span class="line">			System.out.print(Modifier.toString(xx)+<span class="string">" "</span>); <span class="comment">//还原修饰符</span></span><br><span class="line">			System.out.print(r.getName()+<span class="string">" "</span>); <span class="comment">//得到返回值类型名称</span></span><br><span class="line">			System.out.print(m[i].getName()); <span class="comment">//取得方法名称</span></span><br><span class="line">			System.out.print(<span class="string">"("</span>);</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">0</span>; x&lt;p.length; x++)&#123;</span><br><span class="line">				System.out.print(p[x].getName()+<span class="string">" "</span>+<span class="string">"arg"</span>+x);</span><br><span class="line">				<span class="keyword">if</span>(x&lt;p.length-<span class="number">1</span>)&#123;</span><br><span class="line">					System.out.print(<span class="string">","</span>); <span class="comment">//多参数是输出"."</span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			Class&lt;?&gt; ex[] = m[i].getExceptionTypes();<span class="comment">//得到异常类型</span></span><br><span class="line">			<span class="keyword">if</span>(ex.length&gt;<span class="number">0</span>)&#123;</span><br><span class="line">				System.out.print(<span class="string">") throws"</span>);</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				System.out.print(<span class="string">")"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> y=<span class="number">0</span>; y&lt;ex.length; y++)&#123;	<span class="comment">//输出异常信息</span></span><br><span class="line">				System.out.print(ex[y].getName());</span><br><span class="line">				<span class="keyword">if</span>(y&lt;ex.length-<span class="number">1</span>)&#123;</span><br><span class="line">					System.out.print(<span class="string">","</span>);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println(); <span class="comment">//换行</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//取得全部属性</span></span><br><span class="line">		fen();</span><br><span class="line">		&#123;</span><br><span class="line">			Field f[] = c1.getDeclaredFields();<span class="comment">//获取本类属性</span></span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;f.length; i++)&#123;</span><br><span class="line">				Class&lt;?&gt; r = f[i].getType(); <span class="comment">//取得属性类型</span></span><br><span class="line">				<span class="keyword">int</span> mo = f[i].getModifiers(); <span class="comment">//修饰符</span></span><br><span class="line">				String priv = Modifier.toString(mo);<span class="comment">//修正修饰符</span></span><br><span class="line">				System.out.print(<span class="string">"本类属性："</span>);</span><br><span class="line">				System.out.print(priv+<span class="string">" "</span>);</span><br><span class="line">				System.out.print(r.getName()+<span class="string">" "</span>);</span><br><span class="line">				System.out.print(f[i].getName());</span><br><span class="line">				System.out.println(<span class="string">";"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		fen();</span><br><span class="line">		&#123;</span><br><span class="line">			Field f[] = c1.getFields();<span class="comment">//获取本类属性</span></span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;f.length; i++)&#123;</span><br><span class="line">				Class&lt;?&gt; r = f[i].getType(); <span class="comment">//取得属性类型</span></span><br><span class="line">				<span class="keyword">int</span> mo = f[i].getModifiers(); <span class="comment">//修饰符</span></span><br><span class="line">				String priv = Modifier.toString(mo);<span class="comment">//修正修饰符</span></span><br><span class="line">				System.out.print(<span class="string">"公共属性："</span>);</span><br><span class="line">				System.out.print(priv+<span class="string">" "</span>);</span><br><span class="line">				System.out.print(r.getName()+<span class="string">" "</span>);</span><br><span class="line">				System.out.print(f[i].getName());</span><br><span class="line">				System.out.println(<span class="string">";"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//分割线</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fen</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"------------------------"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果是：</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">------------------------</span><br><span class="line">实现的接口名称：com.xinjue.China</span><br><span class="line">------------------------</span><br><span class="line">父类名称：java.lang.<span class="keyword">Object</span></span><br><span class="line">------------------------</span><br><span class="line">构造方法：<span class="keyword">public</span> com.xinjue.Man(java.lang.<span class="keyword">String</span>)</span><br><span class="line">构造方法：<span class="keyword">public</span> com.xinjue.Man(java.lang.<span class="keyword">String</span>,<span class="built_in">int</span>)</span><br><span class="line">构造方法：<span class="keyword">public</span> com.xinjue.Man()</span><br><span class="line">------------------------</span><br><span class="line"><span class="keyword">public</span> java.lang.<span class="keyword">String</span> toString()</span><br><span class="line"><span class="keyword">public</span> java.lang.<span class="keyword">String</span> getName()</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> setName(java.lang.<span class="keyword">String</span> arg0)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> setAge(<span class="built_in">int</span> arg0)</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">int</span> getAge()</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> sayChina()</span><br><span class="line"><span class="keyword">public</span> java.lang.<span class="keyword">String</span> sayHello(java.lang.<span class="keyword">String</span> arg0,<span class="built_in">int</span> arg1)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> wait() throwsjava.lang.InterruptedException</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> wait(<span class="keyword">long</span> arg0,<span class="built_in">int</span> arg1) throwsjava.lang.InterruptedException</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="keyword">void</span> wait(<span class="keyword">long</span> arg0) throwsjava.lang.InterruptedException</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">native</span> <span class="built_in">int</span> hashCode()</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> java.lang.Class getClass()</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">boolean</span> equals(java.lang.<span class="keyword">Object</span> arg0)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="keyword">void</span> notify()</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="keyword">void</span> notifyAll()</span><br><span class="line">------------------------</span><br><span class="line">本类属性：<span class="keyword">private</span> java.lang.<span class="keyword">String</span> name;</span><br><span class="line">本类属性：<span class="keyword">private</span> <span class="built_in">int</span> age;</span><br><span class="line">------------------------</span><br><span class="line">公共属性：<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> java.lang.<span class="keyword">String</span> NATIONAL;</span><br><span class="line">公共属性：<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> java.lang.<span class="keyword">String</span> AUTHOR;</span><br></pre></td></tr></table></figure>
<h2 id="Java反射机制的深入应用">Java反射机制的深入应用</h2><h3 id="通过反射调用类中的方法">通过反射调用类中的方法</h3><p>如果要使用反射调用类中的方法，可以通过Method类完成，流程如下</p>
<ol>
<li>通过Class类的getMethod(String name,Class…parameterTypes)方法取得一个Method对象，并设置此方法操作是所需要的参数类型。</li>
<li>之后可以使用invoke()进行调用，并向方法中传递要设置的参数</li>
</ol>
<p>调用无参方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReflectMore</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Class&lt;?&gt; c1 = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			c1 = Class.forName(<span class="string">"com.xinjue.Man"</span>);</span><br><span class="line">		&#125;<span class="keyword">catch</span>(ClassNotFoundException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Method m = c1.getMethod(<span class="string">"sayChina"</span>);<span class="comment">//此方法没有参数</span></span><br><span class="line">			m.invoke(c1.newInstance()); <span class="comment">//调用此方法，必须传递对象实例</span></span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果是：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">作者：隔壁老王, 国籍：China</span><br></pre></td></tr></table></figure>
<p>调用有参方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReflectMore</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Class&lt;?&gt; c1 = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			c1 = Class.forName(<span class="string">"com.xinjue.Man"</span>);</span><br><span class="line">		&#125;<span class="keyword">catch</span>(ClassNotFoundException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Method m = c1.getMethod(<span class="string">"sayHello"</span>,String.class,<span class="keyword">int</span>.class);<span class="comment">//此方法没有参数</span></span><br><span class="line">			String rv= (String)m.invoke(c1.newInstance(),<span class="string">"隔壁老王"</span>,<span class="number">30</span>); <span class="comment">//调用此方法，必须传递对象实例</span></span><br><span class="line">			System.out.println(rv);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果是：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">隔壁老王你好，我今年30岁了。</span><br></pre></td></tr></table></figure>
<h3 id="通过反射操作类中的属性">通过反射操作类中的属性</h3><p>直接操作类中的属性：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReflectMore</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		Class&lt;?&gt; c1 = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			c1 = Class.forName(<span class="string">"com.xinjue.Man"</span>);</span><br><span class="line">		&#125;<span class="keyword">catch</span>(ClassNotFoundException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		Object obj = <span class="keyword">null</span>;</span><br><span class="line">		obj = c1.newInstance();	<span class="comment">//实例化对象</span></span><br><span class="line">		Field nameField = <span class="keyword">null</span>;</span><br><span class="line">		Field ageField = <span class="keyword">null</span>;</span><br><span class="line">		nameField = c1.getDeclaredField(<span class="string">"name"</span>);<span class="comment">//取得name属性</span></span><br><span class="line">		ageField = c1.getDeclaredField(<span class="string">"age"</span>);<span class="comment">//取得age属性</span></span><br><span class="line">		nameField.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">		nameField.set(obj, <span class="string">"隔壁老王"</span>);<span class="comment">//设置name属性内容</span></span><br><span class="line">		ageField.setAccessible(<span class="keyword">true</span>);<span class="comment">//设置为可被外部访问</span></span><br><span class="line">		ageField.set(obj, <span class="number">30</span>);<span class="comment">//设置age属性</span></span><br><span class="line">		System.out.println(<span class="string">"姓名："</span>+nameField.get(obj));<span class="comment">//通过get取得属性内容</span></span><br><span class="line">		System.out.println(<span class="string">"年龄："</span>+ageField.get(obj));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果是：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">姓名：隔壁老王</span><br><span class="line">年龄：30</span><br></pre></td></tr></table></figure>

          
        
      </div>
    

    
      <div class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/反射/">
                #反射
              </a>
            
          </div>
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2014/09/03/枚举/">
                枚举
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            發表於 2014-09-03
          
        </span>

        
          
        

        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <p>在JDK1.5之前，Java有两种方式定义新类型：类和接口。对于大部分面向对象编程来说，这两种似乎足够了。但是在一些特殊情况下，这些方法就不合适。例如，想定义一个Color类，它只能有Red、Green、Blue 3种值，其它任何值都是非法的。那么JDK1.5之前虽然可以构造这样的代码，但是需要做很多工作，就可能带来各种不安全的问题，而JDK1.5之后引入的枚举类型(Enum)就能避免这些问题。</p>
<h2 id="定义一个枚举类型">定义一个枚举类型</h2><p>在JDK1.5之后引入了一个新的关键字：enum，可以直接定义枚举类型，格式如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">public</span>] <span class="keyword">enum</span> 枚举类型名称&#123;</span><br><span class="line">	枚举对象 <span class="number">1</span>,枚举对象 <span class="number">2</span>,...,枚举对象 n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>例如，定义一个Color的枚举类型：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Color&#123;  <span class="comment">//定义枚举类型</span></span><br><span class="line">	RED, GREEN, BLUE;  <span class="comment">//定义枚举的3个类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上的Color定义出来的枚举类型，其中包含RED, GREEN, BLUE三个数据。可以使用「枚举.variable」取出枚举中的指定内容，也可以用「枚举.values()」的形式将全部的枚举类型变为对象数组。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnumDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//取出指定的枚举类型</span></span><br><span class="line">		Color c = Color.BLUE;</span><br><span class="line">		System.out.println(c);</span><br><span class="line">		System.out.println(<span class="string">"----------"</span>);</span><br><span class="line">		<span class="comment">//取出所有的枚举类型，并用foreach输出</span></span><br><span class="line">		<span class="keyword">for</span>(Color color: Color.values())&#123;</span><br><span class="line">			System.out.println(color);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果是：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">BLUE</span><br><span class="line">----------</span></span><br><span class="line">RED</span><br><span class="line">GREEN</span><br><span class="line">BLUE</span><br></pre></td></tr></table></figure>
<p>枚举的每个类型还可以使用switch进行判断，在switch语句中不能在每一个枚举类型值的前面加上类名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnumDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//取出所有的枚举类型</span></span><br><span class="line">		<span class="keyword">for</span>(Color color: Color.values())&#123;</span><br><span class="line">			print(color);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(Color color)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">switch</span> (color) &#123;  <span class="comment">//判断每个颜色</span></span><br><span class="line">		<span class="keyword">case</span> RED:&#123;</span><br><span class="line">			System.out.println(<span class="string">"红颜色"</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">case</span> GREEN:&#123;</span><br><span class="line">			System.out.println(<span class="string">"绿颜色"</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">case</span> BLUE:&#123;</span><br><span class="line">			System.out.println(<span class="string">"蓝颜色"</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">红颜色</span><br><span class="line">绿颜色</span><br><span class="line">蓝颜色</span><br></pre></td></tr></table></figure>
<h2 id="Enum类">Enum类</h2><p>使用enum关键字声明的枚举类型就相当于定义一个类，而此类则默认继承java.lang.Enum类。java.lang.Enum类的定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Enum</span>&lt;<span class="title">E</span> <span class="keyword">extends</span> <span class="title">Enum</span>&lt;<span class="title">E</span>&gt;&gt; <span class="keyword">extends</span> <span class="title">Object</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">E</span>&gt;, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span></span></span><br></pre></td></tr></table></figure>
<p>Enum主要方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//返回此枚举的名称</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> String <span class="title">name</span><span class="params">()</span></span><br><span class="line"><span class="comment">//返回此枚举常量的序数</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">ordinal</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<p>验证name()和ordinal()方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnumDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//取出所有的枚举类型</span></span><br><span class="line">		<span class="keyword">for</span>(Color color: Color.values())&#123;</span><br><span class="line">			System.out.println(color.ordinal()+<span class="string">"--&gt;"</span>+color.name());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span><span class="comment">--&gt;RED</span></span><br><span class="line"><span class="number">1</span><span class="comment">--&gt;GREEN</span></span><br><span class="line"><span class="number">2</span><span class="comment">--&gt;BLUE</span></span><br></pre></td></tr></table></figure>
<h2 id="实现带有构造方法的枚举">实现带有构造方法的枚举</h2><p>我们对枚举类Color进行改造：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Color&#123;  <span class="comment">//定义枚举类型</span></span><br><span class="line">	RED(<span class="string">"红色"</span>), GREEN(<span class="string">"绿色"</span>), BLUE(<span class="string">"蓝色"</span>);  <span class="comment">//定义枚举的3个类型</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Color</span><span class="params">(String name)</span></span>&#123; <span class="comment">//构造方法需要用private声明</span></span><br><span class="line">		<span class="keyword">this</span>.setName(name);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnumDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//取出所有的枚举类型</span></span><br><span class="line">		<span class="keyword">for</span>(Color color: Color.values())&#123;</span><br><span class="line">			<span class="comment">//print(color);</span></span><br><span class="line">			System.out.println(color.ordinal()+<span class="string">"--&gt;"</span>+color.name()+<span class="string">"--&gt;"</span>+color.getName());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">0</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">RED</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">红色</span></span><br><span class="line"><span class="comment">1</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">GREEN</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">绿色</span></span><br><span class="line"><span class="comment">2</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">BLUE</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">蓝色</span></span><br></pre></td></tr></table></figure>
<h2 id="实现带有抽象方法的枚举类">实现带有抽象方法的枚举类</h2><p>我们继续改造Color：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Color&#123;  <span class="comment">//定义枚举类型</span></span><br><span class="line">	RED(<span class="string">"红色"</span>) &#123;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="string">"我是红色"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;, </span><br><span class="line">	GREEN(<span class="string">"绿色"</span>) &#123;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="string">"我是绿色"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;, </span><br><span class="line">	BLUE(<span class="string">"蓝色"</span>) &#123;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="string">"我是蓝色"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;  <span class="comment">//定义枚举的3个类型</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Color</span><span class="params">(String name)</span></span>&#123; <span class="comment">//构造方法需要用private声明</span></span><br><span class="line">		<span class="keyword">this</span>.setName(name);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">getColor</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnumDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//取出所有的枚举类型</span></span><br><span class="line">		<span class="keyword">for</span>(Color color: Color.values())&#123;</span><br><span class="line">			<span class="comment">//print(color);</span></span><br><span class="line">			System.out.println(color.ordinal()+<span class="string">"--&gt;"</span>+color.name()+<span class="string">"--&gt;"</span>+color.getName()+<span class="string">"--&gt;"</span>+color.getColor());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">0</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">RED</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">红色</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">我是红色</span></span><br><span class="line"><span class="comment">1</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">GREEN</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">绿色</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">我是绿色</span></span><br><span class="line"><span class="comment">2</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">BLUE</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">蓝色</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">我是蓝色</span></span><br></pre></td></tr></table></figure>

          
        
      </div>
    

    
      <div class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/Enum/">
                #Enum
              </a>
            
              <a href="/tags/枚举/">
                #枚举
              </a>
            
          </div>
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2014/08/29/网页设计规范/">
                网页设计规范
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            發表於 2014-08-29
          
        </span>

        
          
            <span class="post-category">
              &nbsp; | &nbsp; 分類於
              
                <a href="/categories/技术储备/">技术储备</a>

                
                

              
            </span>
          
        

        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <p>参考：<br><a href="http://v3.bootcss.com/customize/" target="_blank" rel="external">Bootstrap中文网</a><br><a href="http://codeguide.bootcss.com/" target="_blank" rel="external">编码规范</a><br>同时也建议美工了解一些代码相关知识。</p>
<blockquote>
<p>在做美工兼前端工作的这一段时间内，我深刻的意识到了再优美的设计，如果相互之间没有标准，那对前端工程师来说，这就是个灾难。所以我下面所说的，是基于前端的角度给美工的一些建议。</p>
</blockquote>
<h2 id="Colors_色彩">Colors 色彩</h2><p>站点主题要有一个基本色调。配色需围绕此色调展开。</p>
<p>单个页面配色不宜过多，3-5最佳</p>
<p>每个部件的颜色和部件各个状态的颜色需要先制定好，如按钮的三个状态：默认、鼠标悬停（hover）、点击，需要分别设置颜色以区分不同。</p>
<blockquote>
<p>注意：<br>每个部件的及其各个状态的颜色在不同页面中应该是统一的。</p>
</blockquote>
<h2 id="Typography_排版">Typography 排版</h2><p>排版主要涉及到一下内容：</p>
<ul>
<li>字体：为每个模块定义不同字体（也可以相同），字体大小，字体颜色，字体样式。</li>
<li>段落和行高：正文中的段落样式，段间距，行高也需要统一。</li>
</ul>
<h2 id="Iconography_图标">Iconography 图标</h2><p>可以使用开源的字体图标，如<a href="http://www.iconfont.cn/" target="_blank" rel="external">阿里巴巴矢量图标库</a>、<a href="http://www.bootcss.com/p/simple-icons/" target="_blank" rel="external">Simple Icons</a>、<a href="http://www.bootcss.com/p/font-awesome/" target="_blank" rel="external">Font Awesonme</a>。</p>
<p>如果使用自己设计的图标，最好把整个站点的所有图标都放置于一张图内，格式优先选择png。</p>
<h2 id="Components_组件">Components 组件</h2><p>整体布局一般会分为两列或者三列，列宽和列间距需合理设置并保持整个站点的统一。</p>
<p>如果考虑自适应布局，还应该额外考虑小屏幕下的布局效果。</p>
<h2 id="Tables_表格">Tables 表格</h2><p>表格的边框，宽度，内边距，鼠标悬停互动效果（可选）</p>
<h2 id="Buttons_按钮">Buttons 按钮</h2><p>按钮有下面几类，每一类都需设置好颜色字体等属性（下面几类用不到的可以不用设置）</p>
<ul>
<li>默认样式</li>
<li>主要样式</li>
<li>选择成功</li>
<li>显示信息</li>
<li>提示警告</li>
<li>错误报警</li>
</ul>
<h2 id="Forms_表单">Forms 表单</h2><p>表单的内容一般是需要和后台服务器交互的内容，常见的有选择框，复选框，文字输入框（用户名密码等）</p>
<p>同样，需要设置好边框，背景色，字体大小颜色等</p>
<h2 id="Progress_bars_进度条">Progress bars 进度条</h2><p>进度条也可以分颜色来显示各种类别。</p>
<h2 id="Others_其它">Others 其它</h2><p>写完上面这些，发现其它的细节没什么好写的，主要注意一下几点：</p>
<h3 id="1-_可复用（重要）">1. 可复用（重要）</h3><p>任何一个样式在设计之处就应该将之标准化，在以后的设计中可以直接引用。提高设计的复用性。</p>
<h3 id="2-_简单至上">2. 简单至上</h3><p>能简单的就坚决不复杂，遵从<code>less is more</code>理念。</p>
<h3 id="3-_边设计，边记录（加分项）">3. 边设计，边记录（加分项）</h3><p>在设计的时候，能将内容中的格式，颜色大小等以文档的方式记录下来，方便自己整理，也方便后续的切图及代码编辑。</p>
<h2 id="Questions_疑问">Questions 疑问</h2><p>有疑问，找老陈！</p>
<p>有疑问，找小陈！</p>
<p>有疑问，二陈帮你找办法！</p>
<p>PS: 写的不具体，如有疑问欢迎QQ</p>
<p>PPS:如果页面显示不正常，可以点<a href="http://yanton.github.io/2014/08/29/网页设计规范/" target="_blank" rel="external">这里</a>查看</p>

          
        
      </div>
    

    
      <div class="post-footer">
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2014/08/20/类集框架/">
                Java类集框架
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            發表於 2014-08-20
          
        </span>

        
          
        

        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <p>类集是Java中一个重要特性，在实际开发中占有很重要的地位。</p>
<h2 id="初步认识">初步认识</h2><p>类集就是一个动态的对象数组，是对一些实现好的数据结构进行了包装，这样在使用时就会非常方便，而且最重要的是类集框架本身不受对象数组长度的限制。</p>
<p>累计框架被设计成拥有以下几个特性：</p>
<ol>
<li>这种框架是高性能的，对基本类集(动态数组、链接表、树和散列表)的实现是高效率的。所以一般很少需要人工去对这些「数据引擎」编写代码。</li>
<li>框架必须允许不同类型的类集以相同的方式和高度互操作方式工作。</li>
<li>类集必须是容易扩展和修改的。为了实现这一目标，类集框架被设计成包含了一组标准接口。</li>
</ol>
<h3 id="类集框架主要接口">类集框架主要接口</h3><p>在整个Java类集中最常用的类集接口是：Collection、List、Set、Map、Iterator、ListIterator、Enumeration、SortedSet、SortedMap、Queue、Map.Entry。最主要的三个核心接口是：</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>接口</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Collection</td>
<td>是存放一组单值的最大父接口，所谓的单值是指集合中的每个元素都是一个对象。在新的开发标准中已经很少直接使用此接口进行操作了</td>
</tr>
<tr>
<td>2</td>
<td>Map</td>
<td>是存放一对值的最大父接口，即接口中的每个元素都是一对，以key—value的形式保存</td>
</tr>
<tr>
<td>3</td>
<td>Iterator</td>
<td>集合的输出接口，用语输出集合中的内容，只能进行从前到后的单向输出</td>
</tr>
</tbody>
</table>
<h3 id="Collection接口及其子接口(子类)">Collection接口及其子接口(子类)</h3><p>Collection接口定义：<code>public interface Collection&lt;E&gt; extends Iterable&lt;E&gt;</code>，从定义可发现接口使用的泛型定义，在操作时必须制定具体的操作类型。</p>
<p>Collection接口的常用方法：</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>public boolean add(E o)</td>
<td>向集合中插入对象</td>
</tr>
<tr>
<td>2</td>
<td>public boolean addAll(Collection&lt;? extends E&gt; c)</td>
<td>将一个集合的内容插入进来</td>
</tr>
<tr>
<td>3</td>
<td>public void clear()</td>
<td>清除此集合中的所有元素</td>
</tr>
<tr>
<td>4</td>
<td>public boolean contains(Object o)</td>
<td>判断某一个对象是否在集合中存在</td>
</tr>
<tr>
<td>5</td>
<td>public boolean containsAll(Collection&lt;? extends E&gt; c)</td>
<td>判断一组对象是否在集合中存在</td>
</tr>
<tr>
<td>6</td>
<td>public boolean equals(Object o)</td>
<td>比较对象</td>
</tr>
<tr>
<td>7</td>
<td>public Iterator<e> iterator()</e></td>
<td>为Iterator接口实例化</td>
</tr>
<tr>
<td>8</td>
<td>public boolean remove(Object o)</td>
<td>删除指定对象</td>
</tr>
<tr>
<td>9</td>
<td>public int size()</td>
<td>求出集合的大小</td>
</tr>
<tr>
<td>10</td>
<td>public Object[] toArray()</td>
<td>将一个集合变为对象数组</td>
</tr>
<tr>
<td>11</td>
<td>public <t> T[] toArray(T[] a)</t></td>
<td>指定好返回的对象数组</td>
</tr>
</tbody>
</table>
<blockquote>
<p>关于Collection接口很少直接使用的说明<br>在Java最早的程序开发中提倡使用Collection，但是随着Java的发展，为了让程序的开发及其使用更加明确，例如，此集合中的内容是否可以重复、是否可以排序等、所以提倡直接使用Collection的子接口。</p>
</blockquote>
<p>一般在开发中，往往很少直接使用Collection接口进行开发，基本上都是使用其子接口。子接口主要有List、Set、Queue、SortedSet。</p>
<ul>
<li>List: 可以存放重复的内容。</li>
<li>Set: 不能存放重复的内容，所有的重复内容靠hashCode()和equals()两个方法区分。</li>
<li>Queue: 队列接口。</li>
<li>SortedSet: 可以对集合中的数据进行排序。</li>
</ul>
<h2 id="List接口">List接口</h2><p>List接口扩展的方法：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>public void add(int index,E element)</td>
<td>在指定位置增加元素</td>
</tr>
<tr>
<td>public E get(int index)</td>
<td>返回指定位置的元素</td>
</tr>
<tr>
<td>public int indexOf(Object o)</td>
<td>查找指定位置的元素</td>
</tr>
<tr>
<td>public E set(int index, E element)</td>
<td>替换指定位置的元素</td>
</tr>
<tr>
<td>public E remove(int index)</td>
<td>删除指定位置元素</td>
</tr>
<tr>
<td>public ListIterator<e> listIterator()</e></td>
<td>为指定ListIterator接口实例化</td>
</tr>
</tbody>
</table>
<p>List接口比Collection接口扩充了更多的方法，而且这些方法操作起来很方便，但是如果想要使用此接口，需要通过其子类进行实例化</p>
<h3 id="新的子类ArrayList">新的子类ArrayList</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayList</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractList</span>&lt;<span class="title">E</span>&gt; <span class="keyword">implements</span> <span class="title">List</span>&lt;<span class="title">E</span>&gt;,<span class="title">RandomAccess</span>,<span class="title">Cloneable</span>,<span class="title">Serializable</span></span></span><br></pre></td></tr></table></figure>
<p>范例：增、删、改、查</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayListDemo01</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		List&lt;String&gt; ls = <span class="keyword">new</span> ArrayList&lt;String&gt;(); <span class="comment">//通过子类实例化</span></span><br><span class="line">		<span class="comment">//增加内容</span></span><br><span class="line">		ls.add(<span class="string">"Hello"</span>);</span><br><span class="line">		ls.add(<span class="string">"World"</span>);</span><br><span class="line">		ls.add(<span class="string">"!!!"</span>);</span><br><span class="line">		printList(ls);	<span class="comment">//调用方法打印list</span></span><br><span class="line">		<span class="comment">//删除内容</span></span><br><span class="line">		ls.remove(<span class="number">0</span>);</span><br><span class="line">		printList(ls);</span><br><span class="line">		<span class="comment">//修改内容</span></span><br><span class="line">		ls.set(<span class="number">1</span>,<span class="string">"Nice"</span>);</span><br><span class="line">		printList(ls);</span><br><span class="line">		<span class="comment">//查找内容</span></span><br><span class="line">		System.out.println(ls.indexOf(<span class="string">"World"</span>));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printList</span><span class="params">(List&lt;String&gt; list)</span></span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(String str: list)&#123;</span><br><span class="line">			System.out.print(str+<span class="string">"\t"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>范例：将集合变为对象数组</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayListDemo02</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		List&lt;String&gt; ls = <span class="keyword">new</span> ArrayList&lt;String&gt;(); <span class="comment">//通过子类实例化</span></span><br><span class="line">		<span class="comment">//增加内容</span></span><br><span class="line">		ls.add(<span class="string">"Hello"</span>);</span><br><span class="line">		ls.add(<span class="string">"World"</span>);</span><br><span class="line">		ls.add(<span class="string">"!!!"</span>);</span><br><span class="line">		<span class="comment">//将一个集合变为对象数组</span></span><br><span class="line">		Object obj[] = ls.toArray();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;obj.length; i++)&#123;</span><br><span class="line">			String str = (String)obj[i];</span><br><span class="line">			System.out.print(str+<span class="string">"、"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也可以精确控制数组类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayListDemo03</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		List&lt;String&gt; ls = <span class="keyword">new</span> ArrayList&lt;String&gt;(); <span class="comment">//通过子类实例化</span></span><br><span class="line">		<span class="comment">//增加内容</span></span><br><span class="line">		ls.add(<span class="string">"Hello"</span>);</span><br><span class="line">		ls.add(<span class="string">"World"</span>);</span><br><span class="line">		ls.add(<span class="string">"!!!"</span>);</span><br><span class="line">		<span class="comment">//将一个集合变为对象数组</span></span><br><span class="line">		String str[] = ls.toArray(<span class="keyword">new</span> String[]&#123;&#125;);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;str.length; i++)&#123;</span><br><span class="line">			System.out.print(str+<span class="string">"、"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>toArray()能够将集合转换成对象数组，是两种对象管理方式之间的桥梁，也连接了双方的API。</p>
<h3 id="旧子类：Vector">旧子类：Vector</h3><p>在List集合中还存在一个子类Vector，Vector属于一个挽救的子类，在JDK1.0时就已经存在。到了Java2之后重点强调了集合框架的概念，先后定义了很多新接口(List等)，但是考虑到大部分用户已经习惯了使用Vector类，Java的设计者就让Vector类多实现了一个List接口，将其保留了下来。</p>
<p>Vector的使用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VectorDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		List&lt;String&gt; ls = <span class="keyword">new</span> Vector&lt;String&gt;(); <span class="comment">//通过子类实例化</span></span><br><span class="line">		<span class="comment">//增加内容</span></span><br><span class="line">		ls.add(<span class="string">"Hello"</span>);</span><br><span class="line">		ls.add(<span class="string">"World"</span>);</span><br><span class="line">		ls.add(<span class="string">"!!!"</span>);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;ls.size();i++)&#123;</span><br><span class="line">			System.out.print(ls.get(i)+<span class="string">"、"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>由上面可以看出来Vector的使用和ArrayList大体相似，那么这两个类有什么区别呢？</p>
<table>
<thead>
<tr>
<th style="text-align:center">序号</th>
<th style="text-align:center">比较点</th>
<th style="text-align:center">ArrayList</th>
<th style="text-align:center">Vector</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">推出时间</td>
<td style="text-align:center">JDK1.2之后，属于新的操作类</td>
<td style="text-align:center">JDK1.0时退出，属于旧的操作类</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">性能</td>
<td style="text-align:center">采用异步处理方式，性能更高</td>
<td style="text-align:center">采用同步处理方式，性能较低</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">线程安全</td>
<td style="text-align:center">属于非线程安全的操作类</td>
<td style="text-align:center">属于线程安全的操作类</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">输出</td>
<td style="text-align:center">只能使用Iterator和foreach输出</td>
<td style="text-align:center">可以使用Iterator、foreach和Enumeration输出</td>
</tr>
</tbody>
</table>
<h3 id="LinkedList子类与Queue接口">LinkedList子类与Queue接口</h3><p>LinkedList表示的是一个链表的操作类，定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedList</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractSequentialList</span>&lt;<span class="title">E</span>&gt; <span class="keyword">implements</span> <span class="title">List</span>&lt;<span class="title">E</span>&gt;,<span class="title">Queue</span>&lt;<span class="title">E</span>&gt;,<span class="title">Cloneable</span>,<span class="title">Serializable</span></span></span><br></pre></td></tr></table></figure>
<p>此类实现了List接口，同时也实现了Queue接口，Queue表示的是队列操作接口，采用FIFO(先进先出)的方式操作。</p>
<p>Queue接口是Collection的自接口，常用方法如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//找到链表的表头</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">element</span><span class="params">()</span></span><br><span class="line"><span class="comment">//将指定元素增加到链表的结尾</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">offer</span><span class="params">(E o)</span></span><br><span class="line"><span class="comment">//找到但并不删除链表的头</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title">peek</span><span class="params">()</span></span><br><span class="line"><span class="comment">//找到并删除此链表的头</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title">poll</span><span class="params">()</span></span><br><span class="line"><span class="comment">//检索并移除表头</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<p>在LinkedList类中除了上述方法外，还提供了如下方法：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>public void addFirst(E o)</td>
<td>在链表的开头增加元素</td>
</tr>
<tr>
<td>public void addLast(E o)</td>
<td>在链表的结尾增加元素</td>
</tr>
<tr>
<td>public E removeFirst()</td>
<td>删除链表的第一个元素</td>
</tr>
<tr>
<td>public E removeLast()</td>
<td>删除链表的最后一个元素</td>
</tr>
</tbody>
</table>
<p>下面用范例来熟悉一下上述方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedListDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		LinkedList&lt;String&gt; link = <span class="keyword">new</span> LinkedList&lt;String&gt;(); <span class="comment">//声明并实例化</span></span><br><span class="line">		<span class="comment">//添加内容</span></span><br><span class="line">		link.add(<span class="string">"A"</span>);</span><br><span class="line">		link.add(<span class="string">"B"</span>);</span><br><span class="line">		link.add(<span class="string">"C"</span>);</span><br><span class="line">		link.add(<span class="string">"D"</span>);</span><br><span class="line">		<span class="comment">//查找表头</span></span><br><span class="line">		link.element(); <span class="comment">//找完之后的链表内容是[A,B,C,D]</span></span><br><span class="line">		link.peek(); <span class="comment">//找完之后的链表内容是[A,B,C,D]</span></span><br><span class="line">		link.poll(); <span class="comment">//找完之后的链表内容是[B,C,D]</span></span><br><span class="line">		<span class="comment">//用FIFO的方式取出内容</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;link.size(); i++)&#123;</span><br><span class="line">			System.out.print(link.poll()+<span class="string">"、"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Set接口">Set接口</h2><p>Set接口也是Collection接口的自接口，但是与List不同的是，Set接口中不能加入重复的元素。Set接口定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Set</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">Collection</span>&lt;<span class="title">E</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>从定义也可以看出Set接口与List接口没有太大的区别。但是Set接口的主要方法与Collection接口是一直的，也就是说Set接口并没有对Collection接口进行扩充，只是比Collection接口要求更为严格，不能增加重复元素。</p>
<p>Set接口的实例无法像List接口那样可以进行双向输出，因为此接口没有提供想List接口定义的get(int index)方法。</p>
<p>Set接口常用的子类有HashSet和TreeSet</p>
<h3 id="散列的存放：HashSet">散列的存放：HashSet</h3><p>HashSet的特点是里面不能存放重复元素，且采用散列的存储方式，因为没有顺序性。</p>
<p>验证HashSet：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashSetDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		Set&lt;String&gt; hset = <span class="keyword">new</span> HashSet&lt;String&gt;(); <span class="comment">//实例化</span></span><br><span class="line">		hset.add(<span class="string">"A"</span>); <span class="comment">//增加元素</span></span><br><span class="line">		hset.add(<span class="string">"B"</span>); <span class="comment">//增加元素</span></span><br><span class="line">		hset.add(<span class="string">"C"</span>); <span class="comment">//增加元素</span></span><br><span class="line">		hset.add(<span class="string">"C"</span>); <span class="comment">//重复增加，无法加入</span></span><br><span class="line">		hset.add(<span class="string">"D"</span>); <span class="comment">//增加元素</span></span><br><span class="line">		hset.add(<span class="string">"E"</span>); <span class="comment">//增加元素</span></span><br><span class="line">		<span class="comment">//输出集合对象</span></span><br><span class="line">		System.out.println(hset);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[D,B,A,C,E]</span><br></pre></td></tr></table></figure>
<p>由此可明确看出对于重复元素只会添加一次，并且输出的顺序不是添加元素的顺序，证明HashSet类中的元素是无需排列的。</p>
<h3 id="有序的存放：TreeSet">有序的存放：TreeSet</h3><p>验证TreeSet类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashSetDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		Set&lt;String&gt; hset = <span class="keyword">new</span> TreeSet&lt;String&gt;(); <span class="comment">//实例化</span></span><br><span class="line">		hset.add(<span class="string">"E"</span>); <span class="comment">//增加元素</span></span><br><span class="line">		hset.add(<span class="string">"D"</span>); <span class="comment">//增加元素</span></span><br><span class="line">		hset.add(<span class="string">"C"</span>); <span class="comment">//增加元素</span></span><br><span class="line">		hset.add(<span class="string">"C"</span>); <span class="comment">//重复增加，无法加入</span></span><br><span class="line">		hset.add(<span class="string">"A"</span>); <span class="comment">//增加元素</span></span><br><span class="line">		hset.add(<span class="string">"B"</span>); <span class="comment">//增加元素</span></span><br><span class="line">		<span class="comment">//输出集合对象</span></span><br><span class="line">		System.out.println(hset);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[A,B,C,D,E]</span><br></pre></td></tr></table></figure>
<p>程序在插入数据时是没有顺序的，但是在输出的时候是有序的，所以TreeSet是可以排序的子类。</p>
<h3 id="关于TreeSet排序说明">关于TreeSet排序说明</h3><p>TreeSet中的元素是有序存放的，对于一个对象，必须指定好其排序规则，且TreeSet中的每个对象所在的类都必须实现Comparable接口才可以正常使用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Person</span>&gt; </span>&#123;  </span><br><span class="line">    <span class="keyword">private</span> String name;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">this</span>.name = name;  </span><br><span class="line">        <span class="keyword">this</span>.age = age;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> <span class="string">"姓名："</span> + <span class="keyword">this</span>.name + <span class="string">"，年龄："</span> + <span class="keyword">this</span>.age;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Person per)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.age &lt; per.age) &#123;  </span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;  </span><br><span class="line">        &#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span> <span class="params">(<span class="keyword">this</span>.age &gt; per.age)</span> </span>&#123;  </span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;  </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.name.compareTo(per.name);   </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SortDemo</span> </span>&#123; </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;  </span><br><span class="line">        Set&lt;Person&gt; all = <span class="keyword">new</span> TreeSet&lt;Person&gt;(); <span class="comment">//实例化 </span></span><br><span class="line">        <span class="comment">//添加对象</span></span><br><span class="line">        all.add(<span class="keyword">new</span> Person(<span class="string">"张三"</span>, <span class="number">20</span>));  </span><br><span class="line">        all.add(<span class="keyword">new</span> Person(<span class="string">"李四"</span>, <span class="number">20</span>));  </span><br><span class="line">        all.add(<span class="keyword">new</span> Person(<span class="string">"李四"</span>, <span class="number">20</span>));  </span><br><span class="line">        all.add(<span class="keyword">new</span> Person(<span class="string">"王五"</span>, <span class="number">19</span>));</span><br><span class="line">        <span class="comment">//输出集合</span></span><br><span class="line">        System.out.println(all);  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[姓名：张三，年龄：<span class="number">20</span>, 姓名：李四，年龄：<span class="number">20</span>, 姓名：王五，年龄：<span class="number">19</span>]</span><br></pre></td></tr></table></figure>
<h3 id="关于重复元素的说明">关于重复元素的说明</h3><p>上面例子靠Comparable接口完成去除重复元素的功能，如果换成HashSet则还是会出现重复的内容，想要真正的去除重复元素，需要覆写equals()和hasCode()方法。我们对Person类做如下修改：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Person</span>&gt; </span>&#123;  </span><br><span class="line">    <span class="keyword">private</span> String name;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">this</span>.name = name;  </span><br><span class="line">        <span class="keyword">this</span>.age = age;  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span></span>&#123; <span class="comment">//覆写equals方法</span></span><br><span class="line">    	<span class="keyword">if</span>(<span class="keyword">this</span> == obj)&#123;</span><br><span class="line">    		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">if</span>(!(obj <span class="keyword">instanceof</span> PersonTest))&#123;</span><br><span class="line">    		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    	&#125;</span><br><span class="line">    	PersonTest p = (PersonTest)obj;</span><br><span class="line">    	<span class="keyword">if</span>(<span class="keyword">this</span>.name.equals(p.name) &amp;&amp; <span class="keyword">this</span>.age==p.age)&#123;</span><br><span class="line">    		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span>&#123; <span class="comment">//覆写hashCode()方法</span></span><br><span class="line">    	<span class="keyword">return</span> <span class="keyword">this</span>.name.hashCode()*<span class="keyword">this</span>.age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"姓名："</span> + <span class="keyword">this</span>.name + <span class="string">"，年龄："</span> + <span class="keyword">this</span>.age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RepeatDemo</span> </span>&#123; </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;  </span><br><span class="line">        Set&lt;Person&gt; all = <span class="keyword">new</span> HashSet&lt;Person&gt;(); <span class="comment">//实例化 </span></span><br><span class="line">        <span class="comment">//添加对象</span></span><br><span class="line">        all.add(<span class="keyword">new</span> Person(<span class="string">"张三"</span>, <span class="number">20</span>));</span><br><span class="line">        all.add(<span class="keyword">new</span> Person(<span class="string">"李四"</span>, <span class="number">20</span>));</span><br><span class="line">        all.add(<span class="keyword">new</span> Person(<span class="string">"李四"</span>, <span class="number">20</span>));</span><br><span class="line">        all.add(<span class="keyword">new</span> Person(<span class="string">"王五"</span>, <span class="number">19</span>));</span><br><span class="line">        <span class="comment">//输出集合</span></span><br><span class="line">        System.out.println(all);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[姓名：张三，年龄：<span class="number">20</span>, 姓名：李四，年龄：<span class="number">20</span>, 姓名：王五，年龄：<span class="number">19</span>]</span><br></pre></td></tr></table></figure>
<h2 id="集合的输出">集合的输出</h2><p>在类集中提供了一下四种常见的输出方式：</p>
<ul>
<li>Iterator：迭代输出，是使用最多的输出方式。</li>
<li>ListIterator：是Iterator的子接口，专门用于输出List中的内容。</li>
<li>Enumeration：是一个旧接口，功能与Iterator类似。</li>
<li>foreach：JDK1.5之后提供的新功能，可以输出数组或集合。</li>
</ul>
<h3 id="迭代输出：Iterator">迭代输出：Iterator</h3><p>Iterator是专门的迭代输出接口，所谓的迭代输出就是将元素一个个进行判断，判断其是否有内容，如果有内容则把内容取出。其定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Iterator</span>&lt;<span class="title">E</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>从定义中可以看出在使用时需要指定泛型。该接口中常用的方法如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//判断是否有下一个值</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span></span><br><span class="line"><span class="comment">//取出当前元素</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title">next</span><span class="params">()</span></span><br><span class="line"><span class="comment">//移除当前元素</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<p>输出示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IteratorDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		List&lt;String&gt; al = <span class="keyword">new</span> ArrayList&lt;String&gt;(); <span class="comment">//实例化List接口</span></span><br><span class="line">		al.add(<span class="string">"My"</span>);</span><br><span class="line">		al.add(<span class="string">"name"</span>);</span><br><span class="line">		al.add(<span class="string">"is"</span>);</span><br><span class="line">		al.add(<span class="string">"wyt"</span>);</span><br><span class="line">		Iterator&lt;String&gt; iter = al.iterator(); <span class="comment">//实例化Iterator接口</span></span><br><span class="line">		<span class="keyword">while</span> (iter.hasNext()) &#123;	<span class="comment">//判断</span></span><br><span class="line">			System.out.print(iter.next()+<span class="string">", "</span>);<span class="comment">//输出</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Iterator接口主要功能是由前向后单向输出，而此时如果想要实现由后向前或由前向后的双向输出，则需要使用Iterator的子接口ListIterator。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ListIterator</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">Iterator</span>&lt;<span class="title">E</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>相比于Iterator接口，ListIterator接口还定义了如下方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将指定元素增加集合</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(E o)</span></span><br><span class="line"><span class="comment">//判断是否有上一个元素</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasPrevious</span><span class="params">()</span></span><br><span class="line"><span class="comment">//取出当前元素</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title">previous</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<p>示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListIteratorDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		List&lt;String&gt; al = <span class="keyword">new</span> ArrayList&lt;String&gt;(); <span class="comment">//实例化List接口</span></span><br><span class="line">		al.add(<span class="string">"My"</span>);</span><br><span class="line">		al.add(<span class="string">"name"</span>);</span><br><span class="line">		al.add(<span class="string">"is"</span>);</span><br><span class="line">		al.add(<span class="string">"wyt"</span>);</span><br><span class="line">		ListIterator iter = al.listIterator(); <span class="comment">//实例化ListIterator接口</span></span><br><span class="line">		<span class="keyword">while</span> (iter.hasNext()) &#123;	<span class="comment">//由前向后输出</span></span><br><span class="line">			String str = iter.next();</span><br><span class="line">			System.out.print(str+<span class="string">", "</span>);<span class="comment">//输出</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">while</span> (iter.hasPrevious()) &#123;	<span class="comment">//由后向前输出</span></span><br><span class="line">			String str = iter.previous();</span><br><span class="line">			System.out.print(str+<span class="string">", "</span>);<span class="comment">//输出</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上程序实现了双向的迭代输出，但是此种输出方式只有List接口才可以做到。</p>
<blockquote>
<p>注意：<br>在使用ListIterator接口进行双向输出时，如果想完成由后向前的输出，则一定要<strong>先进行由前向后的输出</strong>。</p>
</blockquote>
<h3 id="废弃的接口：Enumeration">废弃的接口：Enumeration</h3><p>Enumeration接口是JDK1.0就推出的，是最早的迭代输出接口，定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Enumeration</span>&lt;<span class="title">E</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>主要方法有：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//判断是否有下一个值</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasMoreElements</span><span class="params">()</span></span><br><span class="line"><span class="comment">//取出当前元素</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title">nextElement</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<p>Enumeration接口使用的限制：Collection并不支持这种输出，只有旧的Vector支持这种方式，在Vector中定义了<code>public Enumeration&lt;E&gt; elements()</code>方法可以为Enumeration接口实例化。</p>
<p>使用Enumeration输出的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnumerationDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Vector&lt;String&gt; al = <span class="keyword">new</span> Vector&lt;String&gt;(); <span class="comment">//实例化</span></span><br><span class="line">		al.add(<span class="string">"My"</span>);</span><br><span class="line">		al.add(<span class="string">"name"</span>);</span><br><span class="line">		al.add(<span class="string">"is"</span>);</span><br><span class="line">		al.add(<span class="string">"wyt"</span>);</span><br><span class="line">		Enumeration&lt;String&gt; enu = al.elements(); <span class="comment">//实例化Iterator接口</span></span><br><span class="line">		<span class="keyword">while</span> (iter.hasMoreElements()) &#123;	<span class="comment">//判断</span></span><br><span class="line">			System.out.print(enu.nextElement()+<span class="string">", "</span>);<span class="comment">//输出</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Java新支持：foreach">Java新支持：foreach</h3><p>foreach可以用于数组或集合的输出，格式如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(类 对象: 集合)&#123;</span><br><span class="line">	<span class="comment">//集合操作</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用foreach进行输出：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForeachDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		List&lt;String&gt; al = <span class="keyword">new</span> ArrayList&lt;String&gt;(); <span class="comment">//实例化List接口</span></span><br><span class="line">		al.add(<span class="string">"My"</span>);</span><br><span class="line">		al.add(<span class="string">"name"</span>);</span><br><span class="line">		al.add(<span class="string">"is"</span>);</span><br><span class="line">		al.add(<span class="string">"wyt"</span>);</span><br><span class="line">		<span class="keyword">for</span>(String str: al)&#123;</span><br><span class="line">			System.out.print(str+<span class="string">", "</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Map_接口">Map 接口</h2><p>前面使用的Collection、Set、List都属于单值操作，如果要操作一对数据，需要使用<code>Map</code>接口，<code>Map</code>接口中的每个元素都使用键值对，即”key-value”的形式存储在集合中。<code>Map</code>定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Map 接口中的常用方法：</p>
<table>
<thead>
<tr>
<th style="text-align:center">序号</th>
<th style="text-align:left">方    法</th>
<th style="text-align:left">描    述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:left">public void clear()</td>
<td style="text-align:left">清空Map集合</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:left">public boolean containsKey(Object key)</td>
<td style="text-align:left">判断指定的key是否存在</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:left">public boolean containsValue(Object value)</td>
<td style="text-align:left">判断指定的value是否存在</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:left">public Set<map.entry<k,v>&gt; entrySet()</map.entry<k,v></td>
<td style="text-align:left">将Map对象变为Set集合</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:left">public V get(Object key)</td>
<td style="text-align:left">根据key取得value</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:left">public boolean isEmpty()</td>
<td style="text-align:left">判断集合是否为空</td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td style="text-align:left">public Set<k> keySet()</k></td>
<td style="text-align:left">取得所有的key</td>
</tr>
<tr>
<td style="text-align:center">8</td>
<td style="text-align:left">public V put(K key, V value)</td>
<td style="text-align:left">向集合中加入元素</td>
</tr>
<tr>
<td style="text-align:center">9</td>
<td style="text-align:left">public void putAll(Map&lt;? extends K,? extends V&gt; t)</td>
<td style="text-align:left">将一个Map集合中的内容加入到另一个Map</td>
</tr>
<tr>
<td style="text-align:center">10</td>
<td style="text-align:left">public V remove(Object key)</td>
<td style="text-align:left">根据key删除value</td>
</tr>
<tr>
<td style="text-align:center">11</td>
<td style="text-align:left">public int size()</td>
<td style="text-align:left">取出集合的长度</td>
</tr>
<tr>
<td style="text-align:center">12</td>
<td style="text-align:left">public Collection<v> values()</v></td>
<td style="text-align:left">取出全部的value</td>
</tr>
</tbody>
</table>
<p>Map.Entry接口是Map内部定义的一个接口，专门用来保存key—value的内容，定义：<code>public static interface Map.Entry&lt;K,V&gt;</code>, 由于使用的static关键字声明，此接口可以由外部用过「外部类.内部类」的形式直接调用。接口中提供的下面的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//取得key</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> K <span class="title">getKey</span><span class="params">()</span></span><br><span class="line"><span class="comment">//取得value</span></span><br><span class="line"><span class="keyword">public</span> V <span class="title">getValue</span><span class="params">()</span></span><br><span class="line"><span class="comment">//设置value</span></span><br><span class="line"><span class="keyword">public</span> V <span class="title">setValue</span><span class="params">(V value)</span></span></span><br></pre></td></tr></table></figure>
<p>Map集合中是将”kye—value”的数据保存在了Map.Entry接口的实例之后，再在Map集合中插入的是一个Map.Entry的实例化对象。</p>
<p>Map接口常用的子类：</p>
<ul>
<li>HashMap：无序存放的，是新的操作类，key不允许重复。</li>
<li>Hashtable：无序存放的，是旧的操作类，key不允许重复。</li>
<li>TreeMap：可以排序的Map集合，按集合中的key排序，key不允许重复。</li>
<li>WeakHashMap：弱引用的Map集合，当集合中的某些内容不再使用时清除掉无用的数据，使用gc进行回收。</li>
<li>IdentityHashMap：key可以重复的Map集合。</li>
</ul>
<h3 id="新的子类：HashMap">新的子类：HashMap</h3><p>HashMap本身是Map的子类，直接使用此类为Map接口实例化即可。HashMap类的定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashMap</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>,<span class="title">Cloneable</span>,<span class="title">Serializable</span></span></span><br></pre></td></tr></table></figure>
<p>下面列举相关操作的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashMapDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Map&lt;String,String&gt; map = <span class="keyword">null</span>; <span class="comment">//声明Map对象，并指定泛型</span></span><br><span class="line">		map = <span class="keyword">new</span> HashMap&lt;String,String&gt;(); <span class="comment">//实例化</span></span><br><span class="line">		<span class="comment">//增加和获取内容</span></span><br><span class="line">		map.put(<span class="string">"name"</span>,<span class="string">"王延通"</span>); <span class="comment">//添加</span></span><br><span class="line">		map.put(<span class="string">"shotname"</span>,<span class="string">"心觉"</span>); <span class="comment">//添加</span></span><br><span class="line">		map.put(<span class="string">"constellation"</span>,<span class="string">"水瓶座"</span>); <span class="comment">//添加</span></span><br><span class="line">		String val = map.get(<span class="string">"name"</span>); <span class="comment">//根据key取得value</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//判断指定的内容是否存在</span></span><br><span class="line">		<span class="keyword">if</span>(map.containsKey(<span class="string">"name"</span>))&#123; <span class="comment">//查找指定的key是否存在</span></span><br><span class="line">			System.out.println(<span class="string">"搜索的key存在"</span>);</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			System.out.println(<span class="string">"搜索的key不存在"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(map.containsValue(<span class="string">"心觉"</span>))&#123; <span class="comment">//查找指定的Value是否存在</span></span><br><span class="line">			System.out.println(<span class="string">"搜索的value存在"</span>);</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			System.out.println(<span class="string">"搜索的value不存在"</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//输出全部的key</span></span><br><span class="line">		Set&lt;String&gt; keys = map.keySet();</span><br><span class="line">		Iterator&lt;String&gt; iter1 = keys.iterator();</span><br><span class="line">		<span class="keyword">while</span> (iter1.hasNext()) &#123;</span><br><span class="line">			String str = iter.next();</span><br><span class="line">			System.out.print(str+<span class="string">", "</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(); <span class="comment">//换行</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//输出全部的value</span></span><br><span class="line">		Collection&lt;String&gt; values = map.values();</span><br><span class="line">		Iterator&lt;String&gt; iter2 = values.iterator();</span><br><span class="line">		<span class="keyword">while</span> (iter2.hasNext()) &#123;</span><br><span class="line">			String str = iter.next();</span><br><span class="line">			System.out.print(str+<span class="string">", "</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="旧的子类：Hashtable">旧的子类：Hashtable</h3><p>Hashtable也是Map接口的一个子类，与Vector类的推出时间一样，都属于旧的操作类，使用上和之前没有什么太大区别。</p>
<p>Hashtable操作示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashMapDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Map&lt;String,String&gt; map = <span class="keyword">null</span>; <span class="comment">//声明Map对象，并指定泛型</span></span><br><span class="line">		map = <span class="keyword">new</span> Hashtable&lt;String,String&gt;(); <span class="comment">//实例化</span></span><br><span class="line">		<span class="comment">//增加和获取内容</span></span><br><span class="line">		map.put(<span class="string">"name"</span>,<span class="string">"王延通"</span>); <span class="comment">//添加</span></span><br><span class="line">		map.put(<span class="string">"shotname"</span>,<span class="string">"心觉"</span>); <span class="comment">//添加</span></span><br><span class="line">		map.put(<span class="string">"constellation"</span>,<span class="string">"水瓶座"</span>); <span class="comment">//添加</span></span><br><span class="line">		Set&lt;String&gt; keys = map.keySet(); <span class="comment">//得到全部的key</span></span><br><span class="line">		Collection&lt;String&gt; values = map.values(); <span class="comment">//得到全部的value</span></span><br><span class="line">		<span class="comment">//输出操作与上面例子相同，就不再书写操作了。</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="HashMap与Hashtable的区别">HashMap与Hashtable的区别</h3><table>
<thead>
<tr>
<th style="text-align:center">序号</th>
<th>比较点</th>
<th>HashMap</th>
<th>Hashtable</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td>推出时间</td>
<td>JDK1.2之后退出，属于新的操作类</td>
<td>JDK1.0时推出，属于旧的操作类</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td>性能</td>
<td>采用异步处理方式，性能更高</td>
<td>采用同步处理，性能较低</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td>线程安全</td>
<td>属于非线程安全的操作类</td>
<td>属于线程安全的操作类</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td>空键</td>
<td>允许将key设置为null</td>
<td>不允许将key设置为null，否则将出现NullPointerException异常</td>
</tr>
</tbody>
</table>
<p>HashMap类使用较多，需重点掌握。</p>
<h3 id="排序的子类：TreeMap">排序的子类：TreeMap</h3><p>TreeMap排序示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeMapDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Map&lt;String, String&gt; map = <span class="keyword">null</span>;</span><br><span class="line">		map = <span class="keyword">new</span> TreeMap&lt;String,String&gt;();</span><br><span class="line">		map.put(<span class="string">"a.name"</span>,<span class="string">"张三"</span>);</span><br><span class="line">		map.put(<span class="string">"b.name"</span>,<span class="string">"李四"</span>);</span><br><span class="line">		map.put(<span class="string">"c.name"</span>,<span class="string">"王五"</span>);</span><br><span class="line">		Set&lt;String&gt; keys = map.keySet();</span><br><span class="line">		Iterator&lt;String&gt; iter = keys.iterator();</span><br><span class="line">		<span class="keyword">while</span> (iter.hasNext()) &#123;</span><br><span class="line">			String str = iter.next();</span><br><span class="line">			System.out.println(str+<span class="string">"--&gt;"</span>+map.get(str));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>程序运行的结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a.name--&gt;张三</span><br><span class="line">b.name--&gt;李四</span><br><span class="line">c.name--&gt;王五</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：<br>TreeMap可以按照key排序，上面的代码使用的是String类作为key，String类本身已经实现了Comparable接口，所以能够运行成功。如果使用一个自定义的类作为key，则此类不许实现Comparable接口，否则将出现类转换异常。</p>
</blockquote>
<h3 id="弱引用类：WeakHashMap">弱引用类：WeakHashMap</h3><p>WeakHashMap类会自动清理暂时不用的数据，其定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeakHashMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>查看弱引用的Map集合：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeakHashMapDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Map&lt;String, String&gt; map = <span class="keyword">null</span>;</span><br><span class="line">		map = <span class="keyword">new</span> WeakHashMap&lt;String,String&gt;();</span><br><span class="line">		map.put(<span class="keyword">new</span> String(<span class="string">"a.name"</span>),<span class="keyword">new</span> String(<span class="string">"张三"</span>));</span><br><span class="line">		map.put(<span class="keyword">new</span> String(<span class="string">"b.name"</span>),<span class="keyword">new</span> String(<span class="string">"李四"</span>));</span><br><span class="line">		map.put(<span class="keyword">new</span> String(<span class="string">"c.name"</span>),<span class="keyword">new</span> String(<span class="string">"王五"</span>));</span><br><span class="line">		System.gc();</span><br><span class="line">		map.put(<span class="keyword">new</span> String(<span class="string">"abc"</span>), <span class="keyword">new</span> String(<span class="string">"good"</span>));</span><br><span class="line">		System.out.println(<span class="string">"内容:"</span>+map);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">内容:&#123;abc=good&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Map接口的使用注意事项">Map接口的使用注意事项</h3><p><strong>1、不能直接使用迭代输出Map中的全部内容</strong></p>
<p>对于Map接口来说，其本身是不能直接使用迭代（如Iterator、foreach）进行输出的。因为Map中存放的是对值，而Iterator每次只能找到一个值。如果一定要使用迭代进行输出，需按一下步骤完成：</p>
<ol>
<li>将Map接口的实例通过entrySet()方法变为Set接口对象。</li>
<li>通过Set接口实例为Iterator实例化。</li>
<li>通过Iterator迭代输出，每个内容都是Map.Entry的对象。</li>
<li>通过Map.Entry进行key—&gt;value的分离。</li>
</ol>
<p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IteratorMapDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Map&lt;String, String&gt; map = <span class="keyword">null</span>;</span><br><span class="line">		map = <span class="keyword">new</span> HashMap&lt;String,String&gt;();</span><br><span class="line">		map.put(<span class="keyword">new</span> String(<span class="string">"a.name"</span>),<span class="keyword">new</span> String(<span class="string">"张三"</span>));</span><br><span class="line">		map.put(<span class="keyword">new</span> String(<span class="string">"b.name"</span>),<span class="keyword">new</span> String(<span class="string">"李四"</span>));</span><br><span class="line">		map.put(<span class="keyword">new</span> String(<span class="string">"c.name"</span>),<span class="keyword">new</span> String(<span class="string">"王五"</span>));</span><br><span class="line">		map.put(<span class="keyword">new</span> String(<span class="string">"abc"</span>), <span class="keyword">new</span> String(<span class="string">"good"</span>));</span><br><span class="line">		Set&lt;Map.Entry&lt;String,String&gt;&gt; allset = <span class="keyword">null</span>; <span class="comment">//声明一个Set集合</span></span><br><span class="line">		allset = map.entrySet(); <span class="comment">//将Map接口实例变为Set接口实例</span></span><br><span class="line">		Iterator&lt;Map.Entry&lt;String,String&gt;&gt; iter = <span class="keyword">null</span>; <span class="comment">//声明一个Iterator</span></span><br><span class="line">		iter = allset.iterator(); <span class="comment">//实例化</span></span><br><span class="line">		<span class="keyword">while</span>(iter.hasNext())&#123;</span><br><span class="line">			Map.Entry&lt;String, String&gt; me = iter.next(); <span class="comment">//找到Map.Entry实例</span></span><br><span class="line">			System.out.println(me.getKey()+<span class="string">"--&gt;"</span>+me.getValue());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">abc--&gt;good</span><br><span class="line">a.name--&gt;张三</span><br><span class="line">c.name--&gt;王五</span><br><span class="line">b.name--&gt;李四</span><br></pre></td></tr></table></figure>
<p><strong>2、直接使用非系统类作为key</strong></p>
<p>如果使用一个自定义的对象表示Map中的key，则对象所在的类中一定要覆写equals()和hashCode()方法，否则无法通过匿名对象找到对应的value。</p>
<h2 id="Stack类">Stack类</h2><p>Stack表示栈操作类，采用先进后出的数据存储方式，是Vector的子类。Stack类的定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Stack</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">Vector</span>&lt;<span class="title">E</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Stack类常用的操作方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//测试栈是否为空</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">empty</span><span class="params">()</span></span><br><span class="line"><span class="comment">//查看栈顶，但不删除</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title">peek</span><span class="params">()</span></span><br><span class="line"><span class="comment">//出栈，同时删除</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title">pop</span><span class="params">()</span></span><br><span class="line"><span class="comment">//入栈</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title">push</span><span class="params">(E item)</span></span><br><span class="line"><span class="comment">//在栈中查找</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">search</span><span class="params">(Object o)</span></span></span><br></pre></td></tr></table></figure>
<p>完成入栈出栈操作的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StackDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Stack&lt;String&gt; stk = <span class="keyword">new</span> Stack&lt;String&gt;(); <span class="comment">//实例化Stack对象</span></span><br><span class="line">		stk.push(<span class="string">"A"</span>); <span class="comment">//入栈</span></span><br><span class="line">		stk.push(<span class="string">"B"</span>); <span class="comment">//入栈</span></span><br><span class="line">		stk.push(<span class="string">"C"</span>); <span class="comment">//入栈</span></span><br><span class="line">		System.out.print(stk.pop()+<span class="string">", "</span>); <span class="comment">//出栈</span></span><br><span class="line">		System.out.print(stk.pop()+<span class="string">", "</span>); <span class="comment">//出栈</span></span><br><span class="line">		System.out.println(stk.pop()+<span class="string">", "</span>); <span class="comment">//出栈</span></span><br><span class="line">		System.out.print(stk.pop()+<span class="string">", "</span>); <span class="comment">//错误，出栈，出现异常，栈为空</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Exception <span class="keyword">in</span> thread <span class="string">"main"</span> java.util.EmptyStackException</span><br><span class="line">C, B, A, 	at java.util.Stack.peek(Stack.java:<span class="number">85</span>)</span><br><span class="line">	at java.util.Stack.pop(Stack.java:<span class="number">67</span>)</span><br><span class="line">	at com.xinjue.StackDemo.main(StackDemo.java:<span class="number">14</span>)</span><br></pre></td></tr></table></figure>
<p>从程序的运行结果来看，陷进去的内容最后才取出，而且如果栈已经为空，则无法再弹出，会出现空栈异常。</p>
<h2 id="属性类：Properties">属性类：Properties</h2><p>Properties类的主要功能是用于操作属性，在各个语言（包括操作系统）都会存在着许多的配置文件。所有的属性文件中的属性都是按照“key=value”的形式保存的，此类定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Properties</span> <span class="keyword">extends</span> <span class="title">Hashtable</span>&lt;<span class="title">Object</span>, <span class="title">Object</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Properties类中有很多方法：</p>
<table>
<thead>
<tr>
<th style="text-align:center">序号</th>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td>public Properties()</td>
<td>构造一个空的属性类</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td>public String getProperties()</td>
<td>根据属性key取得属性value，如果没有key则返回null</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td>public Object setProperties(String key,String value)</td>
<td>设置属性</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td>public void list(PrintStream out)</td>
<td>属性打印</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td>public void load(InputStream inStream) throws IOException</td>
<td>从输入流中取出全部属性内容</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td>public void loadFromXML(InputStream in) throws IOException, InvalidPropertiesFormatException</td>
<td>从XML文件中读取内容</td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td>public void store(OutputStream out,String comments) throws IOException</td>
<td>将属性内容通过输出流输出，并声明属性注释</td>
</tr>
<tr>
<td style="text-align:center">8</td>
<td>public void storeToXML(OutputStream os, String comments) throws IOException</td>
<td>以XML格式输出属性，默认编码</td>
</tr>
<tr>
<td style="text-align:center">9</td>
<td>public void storeToXML(OutputStream os, String comments, String encoding) throws IOException</td>
<td>以XML格式输出属性，用户指定编码</td>
</tr>
</tbody>
</table>
<p>Properties类的操作示例</p>
<h3 id="设置和取得属性">设置和取得属性</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PropertiesDemo01</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Properties pro = <span class="keyword">new</span> Properties(); <span class="comment">//创建Properties对象</span></span><br><span class="line">		pro.setProperty(<span class="string">"BJ"</span>, <span class="string">"BeiJing"</span>); <span class="comment">//设置内容</span></span><br><span class="line">		pro.setProperty(<span class="string">"TJ"</span>, <span class="string">"TianJin"</span>); <span class="comment">//设置内容</span></span><br><span class="line">		pro.setProperty(<span class="string">"SJZ"</span>, <span class="string">"ShiJiaZhuang"</span>); <span class="comment">//设置内容</span></span><br><span class="line">		System.out.println(<span class="string">"1. BJ属性存在："</span>+pro.getProperty(<span class="string">"BJ"</span>));</span><br><span class="line">		System.out.println(<span class="string">"2. SZ属性不存在："</span>+pro.getProperty(<span class="string">"SZ"</span>));</span><br><span class="line">		System.out.println(<span class="string">"3. SZ属性不存在，同时设置显示的默认值:"</span>+pro.getProperty(<span class="string">"SZ"</span>, <span class="string">"深圳"</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>程序运行的结果如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. BJ属性存在：BeiJing</span><br><span class="line"><span class="number">2</span>. SZ属性不存在：null</span><br><span class="line"><span class="number">3</span>. SZ属性不存在，同时设置显示的默认值:深圳</span><br></pre></td></tr></table></figure>
<h3 id="将属性保存到普通文件中">将属性保存到普通文件中</h3><p>正常属性类操作完成之后，可以将其内容保存在文件中，那么直接使用store()方法即可，同时指定OutputStream的类型，指明输出位置。属性文件的后缀是任意的，但是最好按照标准，将属性文件后缀统一设置成「*.properties」。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.IO.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PropertiesDemo02</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Properties pro = <span class="keyword">new</span> Properties(); <span class="comment">//创建Properties对象</span></span><br><span class="line">		pro.setProperty(<span class="string">"BJ"</span>, <span class="string">"BeiJing"</span>); <span class="comment">//设置内容</span></span><br><span class="line">		pro.setProperty(<span class="string">"TJ"</span>, <span class="string">"TianJin"</span>); <span class="comment">//设置内容</span></span><br><span class="line">		pro.setProperty(<span class="string">"SJZ"</span>, <span class="string">"ShiJiaZhuang"</span>); <span class="comment">//设置内容</span></span><br><span class="line">		<span class="comment">//设置属性文件的保存路径</span></span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"D:"</span>+File.separator+<span class="string">"area.properties"</span>);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="comment">//保存属性到普通文件中，并设置注释内容</span></span><br><span class="line">			pro.store(<span class="keyword">new</span> FileOutputStream(file), <span class="string">"Area Info"</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="从属性文件中读取内容">从属性文件中读取内容</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.IO.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PropertiesDemo03</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Properties pro = <span class="keyword">new</span> Properties(); <span class="comment">//创建Properties对象</span></span><br><span class="line">		<span class="comment">//设置属性文件的操作路径</span></span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"D:"</span>+File.separator+<span class="string">"area.properties"</span>);</span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			pro.laod(<span class="keyword">new</span> FileInputStream(file)); <span class="comment">//读取属性文件</span></span><br><span class="line">		&#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"BJ属性存在："</span>+pro.getProperty(<span class="string">"BJ"</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BJ属性存在：BeiJing</span><br></pre></td></tr></table></figure>
<h3 id="将属性保存在XML文件中">将属性保存在XML文件中</h3><p>如果要把属性保存在XML文件中，则文件的后最需为「*.xml」。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PropertiesDemo04</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Properties pro = <span class="keyword">new</span> Properties(); <span class="comment">//创建Properties对象</span></span><br><span class="line">		pro.setProperty(<span class="string">"BJ"</span>, <span class="string">"BeiJing"</span>); <span class="comment">//设置内容</span></span><br><span class="line">		pro.setProperty(<span class="string">"TJ"</span>, <span class="string">"TianJin"</span>); <span class="comment">//设置内容</span></span><br><span class="line">		pro.setProperty(<span class="string">"SJZ"</span>, <span class="string">"ShiJiaZhuang"</span>); <span class="comment">//设置内容</span></span><br><span class="line">		<span class="comment">//设置属性文件的保存路径</span></span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"D:"</span>+File.separator+<span class="string">"area.xml"</span>);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="comment">//保存属性到普通文件中，并设置注释内容</span></span><br><span class="line">			pro.storeToXML(<span class="keyword">new</span> FileOutputStream(file), <span class="string">"Area Info"</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;</span></span><br><span class="line"><span class="doctype">&lt;!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">comment</span>&gt;</span>Area Info<span class="tag">&lt;/<span class="title">comment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">entry</span> <span class="attribute">key</span>=<span class="value">"SJZ"</span>&gt;</span>ShiJiaZhuang<span class="tag">&lt;/<span class="title">entry</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">entry</span> <span class="attribute">key</span>=<span class="value">"BJ"</span>&gt;</span>BeiJing<span class="tag">&lt;/<span class="title">entry</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">entry</span> <span class="attribute">key</span>=<span class="value">"TJ"</span>&gt;</span>TianJin<span class="tag">&lt;/<span class="title">entry</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="从XML文件中读取属性">从XML文件中读取属性</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.IO.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PropertiesDemo05</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Properties pro = <span class="keyword">new</span> Properties(); <span class="comment">//创建Properties对象</span></span><br><span class="line">		<span class="comment">//设置属性文件的操作路径</span></span><br><span class="line">		File file = <span class="keyword">new</span> File(<span class="string">"D:"</span>+File.separator+<span class="string">"area.xml"</span>);</span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			pro.laodFromXML(<span class="keyword">new</span> FileInputStream(file)); <span class="comment">//读取属性文件</span></span><br><span class="line">		&#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"BJ属性存在："</span>+pro.getProperty(<span class="string">"BJ"</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BJ属性存在：BeiJing</span><br></pre></td></tr></table></figure>

          
        
      </div>
    

    
      <div class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/Collection/">
                #Collection
              </a>
            
              <a href="/tags/List/">
                #List
              </a>
            
              <a href="/tags/Map/">
                #Map
              </a>
            
              <a href="/tags/Set/">
                #Set
              </a>
            
              <a href="/tags/类集/">
                #类集
              </a>
            
          </div>
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2014/08/16/前端JS构建工具大比拼/">
                前端JS构建工具大比拼：Grunt vs Gulp vs NPM
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            發表於 2014-08-16
          
        </span>

        
          
            <span class="post-category">
              &nbsp; | &nbsp; 分類於
              
                <a href="/categories/技术储备/">技术储备</a>

                
                

              
            </span>
          
        

        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <p>应陈哥之邀翻译此文，E文水平有限，相关专业词汇储备有限，这里是<a href="http://blog.ponyfoo.com/2014/07/04/choose-grunt-gulp-or-npm" target="_blank" rel="external">原文地址</a></p>
<blockquote>
<p><a href="http://modernweb.com/authors/nicolas-bevacqua/" target="_blank" rel="external">Nicolas Bevacqua</a>正在钻研如何选择一个JavaScript构建系统。他比较了当前最流行的三个工具：Grunt，Gulp和NPM，并且讨论了它们各自的优缺点。</p>
</blockquote>
<p>原文作者：<a href="http://modernweb.com/authors/nicolas-bevacqua/" target="_blank" rel="external">Nicolas Bevacqua</a></p>
<p>敲定使用一项技术实在是太困难了。你不想做出你无法收回的承诺，但是最终还是不得不选择一种技术，去做一些你需要它做的事情。这一点跟选择构建技术一样：它是一个你需要认真对待的重要选择。我们以<a href="http://gruntjs.com/" target="_blank" rel="external">Grunt</a>为例。</p>
<ul>
<li><a href="http://gruntjs.com/" target="_blank" rel="external">Grunt</a>拥有一个健康的社区，即使是Windows环境</li>
<li>它不仅仅在Node社区使用</li>
<li>不需要懂得先进的概念，也不需要储备大量的先验知识</li>
</ul>
<p>这些都是使用Grunt的优势，但是我想声明的是，我不认为Grunt是现有的构建工具中的唯一最优选择。还有其它一些流行的构建工具，它们或许比Grunt更好的切合你的需求。</p>
<p>我写的这篇总结就是为了帮助你们了解Grunt、Gulp和NPM之间的不同。这三个工具是我从事前端开发工作流程中最常用的三个构建工具。当我讲解的时候，我会列举出一个工具在什么情况下会比其它的更好。</p>
<p>首先，我们先讨论一下Grunt的优势何在。</p>
<h2 id="Grunt：优势所在">Grunt：优势所在</h2><p>Grunt最好的一点便是它的易用性。它能让程序员毫不费力的用JavaScript开发构建流程。需要做的仅仅是找到合适的插件，阅读插件文档，安装插件并配置好它。这种易用性意味着拥有不同技能层级的大型开发团队的成员，可以毫无压力的调整构建流程以符合项目的最新的需求。该团队甚至也不需要熟练的使用Node，他们只需要为组成构建流程的配置对象、任务名称和各种数组们添加内容。</p>
<p>已有的插件如此之多，以至于你会发现你几乎用不到开发自己的构建任务；使得你和你的团队能够快速的开发一个构建进程，而这对于追寻Build First范式的你来说及其重要，即使工作少许，也能逐渐开发出你自己的构建流程。</p>
<p>通过Grunt来应付部署任务也是可行的，它有如此多的插件包来搞定这些任务们，比如<code>grunt-git</code>，<code>grunt-rsync</code>，或者<code>grunt-ec2</code>等等。</p>
<p>那么Grunt的短板在哪里？如果你有一个相当大的构建流程，那它可能会变得非常冗长。通常从整体上搞清楚一个已经被开发的构建流程会很困难。一旦构建流程中的任务达到了两位数，可以保证的说你将不得不分别运行同一个任务中的目标，确保你能够以正确的顺序编译这个流程。由于任务是在配置文件中声明的，弄清楚执行任务的顺序也很困难。</p>
<p>此外，在构建的时候你的团队应该致力于书写可维护的代码。对于Grunt来说就是维护每个任务的配置文件，或者起码维护你的团队所用到的构建流程。</p>
<p>既然我们已经道出了Grunt的优点和缺点，也明了什么情况下它会更适合你的项目，接下来让我说一说NPM，作为一个构建工具，它是如何 「四两拨千斤」的，它和Grunt又有什么不同呢？</p>
<h2 id="npm构建工具">npm构建工具</h2><p>为了能将npm作为构建工具使用，你需要一个<code>package.json</code>文件和<code>npm</code>。给npm定义任务就像给给你的package清单中的<code>scripts</code>对象添加属性一样简单。属性名成将会用作任务名，而其值存储的是你想要执行的命令。下面这个示例使用JSHint命令行接口通过js文件运行了一个命令，并且检验。你可以运行任何你需要的shell命令。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"test"</span>: <span class="string">"jshint . --exclude node_modules"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"jshint"</span>: <span class="string">"^2.5.1"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>一旦定义好了任务，你可以在你的命令行运行如下命令来使之执行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run <span class="built_in">test</span></span><br></pre></td></tr></table></figure>
<p>需要注意的是，npm为特定的任务名称提供了快捷方式。在上面这个<code>test</code>中，你可以省略掉中间的<code>run</code>，仅输入<code>npm test</code>即可。你可以在script声明中把<code>npm run</code>命令都连接到一起来编译构建流程。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"lint"</span>: <span class="string">"jshint . --exclude node_modules"</span>,</span><br><span class="line">    <span class="string">"unit"</span>: <span class="string">"tape test/*"</span>,</span><br><span class="line">    <span class="string">"test"</span>: <span class="string">"npm run lint &amp;&amp; npm run unit"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"jshint"</span>: <span class="string">"^2.5.1"</span>,</span><br><span class="line">    <span class="string">"tape"</span>: <span class="string">"~2.10.2"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>你也可以以后台工作的方式规划任务，使其异步工作。假设我们有下列的package文件，我们只是想在我们的JavaScript构建流程中复制目录和在CSS构建流程中编译一个stylus文件(stylus是一个CSS预处理器)。此时，异步运行这些任务是非常完美的。你可以通过使用<code>&amp;</code>符号或者在一个命令之后来实现这些。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"build-js"</span>: <span class="string">"cp -r src/js/vendor bin/js"</span>,</span><br><span class="line">    <span class="string">"build-css"</span>: <span class="string">"stylus src/css/all.styl -o bin/css"</span>,</span><br><span class="line">    <span class="string">"build"</span>: <span class="string">"npm run build-js &amp; npm run build-css"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"stylus"</span>: <span class="string">"^0.45.0"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>想学更多如何使用npm构建工具，你应该试着去学如何写<code>Bash</code>命令。</p>
<h3 id="安装npm的任务依赖">安装npm的任务依赖</h3><p>你的系统中并不一定需要JSHint CLI，有两种安装它的方式。如果你想在你的命令行里直接使用这个工具，而不是在<code>npm run</code>任务里，你需要全局安装，使用<code>-g</code>标志，如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g jshint</span><br></pre></td></tr></table></figure>
<p>然而，如果你在<code>npm run</code>任务中使用这个包，你需要把它作为<code>devDependency</code>来添加，如下所示。这会允许npm在依赖包安装的系统中寻找到JSHint包，而不是期待JSHint全局安装在环境中。这适用于在操作系统中不是有效的各种CLI工具。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev jshint</span><br></pre></td></tr></table></figure>
<p>你不仅仅可以使用CLI工具，事实上npm能够运行任何shell脚本。让我们深入了解一下！</p>
<h3 id="在npm任务中使用shell脚本">在npm任务中使用shell脚本</h3><p>下面是一个在Node上运行的脚本，显示了随机的emoji字符串。第一行告诉我们这个脚本的运行环境是Node。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#!<span class="regexp">/usr/</span>bin/env node</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> emoji = <span class="built_in">require</span>(<span class="string">'emoji-random'</span>);</span><br><span class="line"><span class="keyword">var</span> emo = emoji.random();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(emo);</span><br></pre></td></tr></table></figure>
<p>如果你想将脚本放置到名为<code>emoji</code>的文件中，并将这个文件置于项目的根目录下，你需要将<code>emoji-random</code>声明成一个依赖，并向package清单中的<code>scripts</code>对象中添加命令。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"emoji"</span>: <span class="string">"./emoji"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"emoji-random"</span>: <span class="string">"^0.1.2"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>一旦搞定这些，运行命令不过是在你的终端里调用<code>npm run emoji</code>而已。</p>
<h3 id="优点和缺点">优点和缺点</h3><p>把npm当作构建工具比使用Grunt要多一些优势。你不必拘泥于Grunt的各种插件，可以利用拥有数万的npm包。除了<code>npm</code>你甚至不需要安装任何多余的CLI工具或文件，就可以管理你的依赖，和罗列了所有依赖和构建命令的<code>package.json</code>清单。由于<code>npm</code>运行CLI工具和Bash命令更直接，它会比Grunt表现的更好。</p>
<p>需要考虑到Grunt的最大的缺点之一，便是它的I/O限制。这意味着大多数的Grunt任务是从硬盘读取的，然后在写入到硬盘。如果你有几个任务共同使用一个文件，那么这个文件有可能会从硬盘多次读取。在Bash中，命令会连接成一个管道，一个命令输出接着下一个，这样就避免了像Grunt那样的额外I/O开销。</p>
<p>或许npm最大的缺点是Bash命令行在Windows系统环境中无法得到很好的支持。这意味着在Windows系统中把玩使用<code>npm run</code>的开源项目运行起来的项目可能会出各种「小意外」。同样，这也意味着使用Windows的开发者需要尝试使用<code>npm</code>的替代品。这一缺点几乎排除了在Windows中使用<code>npm</code>。</p>
<p>Gulp，另一个构建工具，表现的跟Grunt和npm相似，接下来你会了解到它。</p>
<h2 id="Gulp，一个流构建工具">Gulp，一个流构建工具</h2><p>Gulp和Grunt相似，它们都依赖各种各样的插件，并且Gulp是跨平台的，同样支持Windows用户。Gulp是一个代码驱动型的构建工具，相比于Grunt的用声明的方式来给任务定义，Gulp会让你的任务定义更容易阅读。Gulp也跟<code>npm run</code>很相似，她们都使用Node数据流来读取文件，并且通过函数来传递数据，将其转换为输出，在输出结束后将数据写入硬盘。这就使得Gulp没有Grunt那样对硬盘频繁进行I/O操作的缺点。正因消耗更少的I/O操作时间，Gulp才会比Grunt速度快。</p>
<p>Gulp最主要的缺点在于它严重依赖流，管道和异步代码。别误会我：如果你使用Node，那这些都是它的优点。但这些观念的问题是除非你和你的团队精通Node，否则你将会陷入处理「流」的问题中，特别是如果你不得不构建自己的Gulp任务插件时。</p>
<p>在团队协作时，Gulp并不禁止使用<code>npm</code>，因为大多前端团队成员都懂得JavaScript，但也有可能他们并不能流畅的使用Bash脚本，甚至有些人使用的是Windows系统。这就是为什么我通常建议在你自己的项目中保持使用<code>npm run</code>，在对Node熟悉的团队项目中使用Gulp，其它情况下都可以使用Grunt。当然了，这只是我的个人建议，你应该自己想清楚哪一个最适合你的你的团队。还有，你也不要把你自己局限于Grunt，gulp或者<code>npm run</code>，它们仅仅是为我所用的工具。尝试去做一点调查研究，或许你就能发现一个你觉得比这三个都好用的工具。</p>
<p>让我们瞅一些案例，感受一下Gulp任务看起来是个什么东东。</p>
<h3 id="用Gulp运行测试">用Gulp运行测试</h3><p>Gulp有着和Grunt及其相似的约定。在Grunt中使用<code>Gruntfile.js</code>文件来定义你的构建任务，在Gulp中需要把这个文件命名为<code>Gulpfile.js</code>。其它的小区别是当任务运行时，Gulp的CLI包含在相同的包内，所以你将不得不通过npm在本地和全局都安装上<code>gulp</code>包。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">touch Gulpfile.js</span><br><span class="line">npm install -g gulp</span><br><span class="line">mpm install --save-dev gulp</span><br></pre></td></tr></table></figure>
<p>一开始，我会创建一个Gulp任务：使用JSHint检查一个JavaScript文件，就像你在Grunt和<code>npm run</code>中已经看到的一样。你需要为JSHint安装<code>gulp-jshint</code>插件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev gulp-jshint</span><br></pre></td></tr></table></figure>
<p>现在你已经用CLI完全装备好了，全局安装，本地的<code>gulp</code>安装和<code>gulp-jshint</code>插件，你可以将构建任务汇集到一起来运行检查器。用Gulp定义构建任务，你必须将它们写入<code>Gulpfile.js</code>文件中。</p>
<p>首先你需要使用<code>gulp.task</code>，并给它传递一个任务名称和函数。这个函数包含运行任务所必须的代码。这里你应该用<code>gulp.src</code>来创建一个读入流到你的源文件中，像我们在学习Grunt中一样使用一个全局配置。相同的流应该引导至JSHint插件，在这里你可以自行配置或者使用默认配置。之后你所需做的是通过指示器链接JSHint的结果，然后将结果输出到你的终端。所有我所描述的结果都基于下面呈现的Gulpfile。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"><span class="keyword">var</span> jshint = <span class="built_in">require</span>(<span class="string">'gulp-jshint'</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'test'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src(<span class="string">'./sample.js'</span>)</span><br><span class="line">    .pipe(jshint())</span><br><span class="line">    .pipe(jshint.reporter(<span class="string">'default'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>我还应该提到我正在返回数据流，使得Gulp能明白在任务完成之前，它应该等待数据停止流动。为了能让输出更容易被人类阅读，你应该使用默认的JSHint指示器。JSHint指示器不需要作为Gulp插件，因此你可以使用<code>jshint-sytlish</code>为例。让我们本地安装它。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev jshint-stylish</span><br></pre></td></tr></table></figure>
<p>更新后的Gulpfile应该如下所示。它将会读取<code>jshint-stylish</code>模式来格式化指示器的输出。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"><span class="keyword">var</span> jshint = <span class="built_in">require</span>(<span class="string">'gulp-jshint'</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'test'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src(<span class="string">'./sample.js'</span>)</span><br><span class="line">    .pipe(jshint())</span><br><span class="line">    .pipe(jshint.reporter(<span class="string">'jshint-stylish'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>你做到了！！这就是名为<code>test</code>的Gulp任务所有的声明。用下面的命令使之运行，确保你全局安装了<code>gulp</code>CLI。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gulp <span class="built_in">test</span></span><br></pre></td></tr></table></figure>
<p>这只是一个简单的小案例。就像你通过可以打印检验结果的指示器输出JSHint检验的结果，你甚至可以用<code>gulp.dest</code>将输出写入硬盘。接下来我们探寻另一个构建任务。</p>
<h3 id="在Gulp中构建一个库">在Gulp中构建一个库</h3><p>在一开始，我们来设定一下最低限度：使用<code>gulp.src</code>从硬盘读取并切通过用管道传输<code>gulp.dest</code>中源文件的内容来写回到硬盘，有效的见文件复制到其它目录中。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'build'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src(<span class="string">'./sample.js'</span>)</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'./build'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>复制文件挺不错的，但是它并不能是文件内容最小化。为了达到这个效果，你还需要使用一个Gulp插件。这种情况下可以用<code>gulp-uglify</code>，一个流行的UglifyJs压缩插件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'build'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src(<span class="string">'./sample.js'</span>)</span><br><span class="line">    .pipe(uglify())</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'./build'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>如你所料，流操作使得你可以添加一堆插件，但是却只需要对硬盘实行一次读写操作。作为一个例子：我们可以使用<code>gulp-size</code>(它能够计算出缓存区内容的大小，并且输出到终端)。注意，如果你把它添加在Uglify之前，你会得到原始大小，而添加到Uglify之后，则会得到压缩后的大小。你也可以在前后都添加。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>);</span><br><span class="line"><span class="keyword">var</span> size = <span class="built_in">require</span>(<span class="string">'gulp-size'</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'build'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src(<span class="string">'./sample.js'</span>)</span><br><span class="line">    .pipe(uglify())</span><br><span class="line">    .pipe(size())</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'./build'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>为了加强可组合型，能够按需添加和移除pipe，我们最后需要添加一个插件。这一次，我将使用<code>gulp-header</code>来向压缩的代码片段中添加一些许可信息，例如名称，包的版本号，和许可的类型。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>);</span><br><span class="line"><span class="keyword">var</span> size = <span class="built_in">require</span>(<span class="string">'gulp-size'</span>);</span><br><span class="line"><span class="keyword">var</span> header = <span class="built_in">require</span>(<span class="string">'gulp-header'</span>);</span><br><span class="line"><span class="keyword">var</span> pkg = <span class="built_in">require</span>(<span class="string">'./package.json'</span>);</span><br><span class="line"><span class="keyword">var</span> info = <span class="string">'// &lt;%= pkg.name %&gt;@v&lt;%= pkg.version %&gt;, &lt;%= pkg.license %&gt;\n'</span>;</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'build'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src(<span class="string">'./sample.js'</span>)</span><br><span class="line">    .pipe(uglify())</span><br><span class="line">    .pipe(header(info, &#123; pkg : pkg &#125;))</span><br><span class="line">    .pipe(size())</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'./build'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>就像在Grunt中一样，在Gulp中你可以通过向<code>gulp.task</code>中传递名称数组来定义流程。而不是通过函数。Grunt和Gulp最主要的区别是Gulp会异步执行这些依赖，而Grunt是同步执行的。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(&#39;build&#39;,[&#39;builid-js&#39;,&#39;build-css&#39;]);</span><br></pre></td></tr></table></figure>
<p>在Gulp中，如果你想同步运行任务，你不得不将任务作为依赖来声明，然后定义你自己的任务。所有依赖会在你的任务开始之前执行。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'build'</span>, [<span class="string">'dep'</span>], <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// here goes the task that depends on 'dep'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>如果你能从本文中有所收获，那么请记下下面的话：</p>
<blockquote>
<p>你用什么工具并不重要，关键在于它能够让你编译构建流程的工作更轻松。</p>
</blockquote>

          
        
      </div>
    

    
      <div class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/Grunt/">
                #Grunt
              </a>
            
              <a href="/tags/Gulp/">
                #Gulp
              </a>
            
              <a href="/tags/NPM/">
                #NPM
              </a>
            
          </div>
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2014/08/16/比较器浅析/">
                比较器浅析
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            發表於 2014-08-16
          
        </span>

        
          
        

        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <h2 id="Comparable接口">Comparable接口</h2><h3 id="比较器的基本应用">比较器的基本应用</h3><p>在初学java数组的时候碰到排序的时候，我们可以直接使用<code>java.util.Arrays</code>类中的<code>sort()</code>方法，该方法会根据数值的大小进行排序。同样此方法也可以对<code>Object</code>数组进行排序，但是要使用此种方法排序，其对象所在的类必须实现Comparable接口，此接口就是用语指定对象排序规则的。Comparable接口定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Comparable</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(T o)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上定义中可以发现，Comparable接口也使用的Java泛型技术。其中只有一个<code>compareTo()</code>方法，此方法返回一个int类型的数据，但是次int的值只能是以下三种：</p>
<ul>
<li>1：表示大于</li>
<li>-1：表示小雨</li>
<li>0：表示相等</li>
</ul>
<p>下面举个栗子，例如要设计一个学生类，包含姓名年龄成绩，并产生一个对象数组，要求按成绩由高到低排序，如果成绩相等，则按年龄由低到高排序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Student</span>&gt;</span>&#123; <span class="comment">//指定泛型为Student</span></span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">float</span> score;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name, <span class="keyword">int</span> age, <span class="keyword">float</span> score)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">		<span class="keyword">this</span>.score = score;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name+<span class="string">"\t\t"</span>+age+<span class="string">"\t\t"</span>+score;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Student s)</span></span>&#123; <span class="comment">//覆写compareTo()方法，实现排序规则的应用</span></span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">this</span>.score&gt;s.score)&#123;</span><br><span class="line">			<span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">		&#125;<span class="function"><span class="keyword">else</span> <span class="title">if</span><span class="params">(<span class="keyword">this</span>.score&lt;s.score)</span></span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(<span class="keyword">this</span>.age &gt; s.age)&#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">			&#125;<span class="function"><span class="keyword">else</span> <span class="title">if</span><span class="params">(<span class="keyword">this</span>.age &lt; s.age)</span></span>&#123;</span><br><span class="line">				<span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Student stu[] = &#123;<span class="keyword">new</span> Student(<span class="string">"aaa"</span>,<span class="number">17</span>,<span class="number">90.0f</span>), <span class="keyword">new</span> Student(<span class="string">"bbb"</span>,<span class="number">18</span>,<span class="number">90.0f</span>),</span><br><span class="line">				<span class="keyword">new</span> Student(<span class="string">"ccc"</span>,<span class="number">19</span>,<span class="number">93.0f</span>), <span class="keyword">new</span> Student(<span class="string">"ddd"</span>,<span class="number">20</span>,<span class="number">98.0f</span>)&#125;;</span><br><span class="line">		java.util.Arrays.sort(stu);	<span class="comment">//进行排序操作</span></span><br><span class="line">		<span class="keyword">for</span>(Student s: stu)&#123;</span><br><span class="line">			System.out.println(s);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<p><img src="http://xinjue.qiniudn.com/github/201408/compareTo.jpg" alt="运行结果"></p>
<h3 id="分析比较器的排序原理">分析比较器的排序原理</h3><p>实际上上面的排序过程就是数据结构中的二叉树排序算法，功过二叉树进行排序，然后利用中序遍历的方式把内容依次读取出来。</p>
<p>二叉树的基本原理就是：将第一个内容作为根节点保存，如果后面的值比根节点的值小，则放置在根节点的左子树，如果后面的值比根节点的值大，则放在右子树。</p>
<p>按照这样的思路，如果给出梳子8，3，10，9，1，5，则保存的树结构如下图所示。</p>
<p><img src="http://xinjue.qiniudn.com/github/201408/bt.jpg" alt="二叉树排序原理"></p>
<p>然后根据中序遍历的原理（左子树，根节点，右子树的顺序）即可将梳子排序读取出来，排序后的结果为1、3、5、8、9、10.</p>
<p>下面按照这个思路来编写一个简单的二叉树排序操作，我们使用上面示例中的Student类(此时需要加上setter和getter方法)来进行排序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinaryTree</span></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">		<span class="keyword">private</span> Student data;</span><br><span class="line">		<span class="keyword">private</span> Node left;</span><br><span class="line">		<span class="keyword">private</span> Node right;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addNode</span><span class="params">(Node newNode)</span></span>&#123;</span><br><span class="line">			<span class="comment">//判断是该放在左子树还是右子树</span></span><br><span class="line">			<span class="keyword">if</span>(newNode.data.compareTo(<span class="keyword">this</span>.data)&lt;<span class="number">0</span>)&#123;	<span class="comment">//放在左子树</span></span><br><span class="line">				<span class="keyword">if</span>(<span class="keyword">this</span>.left==<span class="keyword">null</span>)&#123;</span><br><span class="line">					<span class="keyword">this</span>.left = newNode;</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					<span class="keyword">this</span>.left.addNode(newNode);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(newNode.data.compareTo(<span class="keyword">this</span>.data)&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">				<span class="keyword">if</span>(<span class="keyword">this</span>.right==<span class="keyword">null</span>)&#123;</span><br><span class="line">					<span class="keyword">this</span>.right = newNode;</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					<span class="keyword">this</span>.right.addNode(newNode);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//中序打印节点</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printNode</span><span class="params">()</span></span>&#123;</span><br><span class="line">			<span class="comment">//先输出左子树</span></span><br><span class="line">			<span class="keyword">if</span>(<span class="keyword">this</span>.left != <span class="keyword">null</span>)&#123;</span><br><span class="line">				<span class="keyword">this</span>.left.printNode();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//再输出根节点</span></span><br><span class="line">			System.out.println(<span class="string">"姓名："</span>+<span class="keyword">this</span>.data.getName()+<span class="string">", 年龄："</span>+<span class="keyword">this</span>.data.getAge()+<span class="string">", 成绩："</span>+<span class="keyword">this</span>.data.getScore());</span><br><span class="line">			<span class="comment">//再输出右子树</span></span><br><span class="line">			<span class="keyword">if</span>(<span class="keyword">this</span>.right != <span class="keyword">null</span>)&#123;</span><br><span class="line">				<span class="keyword">this</span>.right.printNode();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="keyword">private</span> Node root;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Student data)</span></span>&#123;</span><br><span class="line">		Node newNode = <span class="keyword">new</span> Node();</span><br><span class="line">		newNode.data = data;</span><br><span class="line">		<span class="keyword">if</span>(root == <span class="keyword">null</span>)&#123;</span><br><span class="line">			root = newNode;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			root.addNode(newNode);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.root.printNode();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BinaryTreeDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		BinaryTree bt = <span class="keyword">new</span> BinaryTree();</span><br><span class="line">		bt.add(<span class="keyword">new</span> Student(<span class="string">"aaa"</span>, <span class="number">10</span>, <span class="number">98.0f</span>));</span><br><span class="line">		bt.add(<span class="keyword">new</span> Student(<span class="string">"bbb"</span>, <span class="number">10</span>, <span class="number">94.0f</span>));</span><br><span class="line">		bt.add(<span class="keyword">new</span> Student(<span class="string">"ccc"</span>, <span class="number">10</span>, <span class="number">93.0f</span>));</span><br><span class="line">		bt.add(<span class="keyword">new</span> Student(<span class="string">"ddd"</span>, <span class="number">10</span>, <span class="number">96.0f</span>));</span><br><span class="line">		bt.add(<span class="keyword">new</span> Student(<span class="string">"eee"</span>, <span class="number">10</span>, <span class="number">91.0f</span>));</span><br><span class="line">		bt.add(<span class="keyword">new</span> Student(<span class="string">"fff"</span>, <span class="number">10</span>, <span class="number">90.0f</span>));</span><br><span class="line">		bt.print();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<p><img src="http://xinjue.qiniudn.com/github/201408/btresault.jpg" alt="排序之后结果"></p>
<h2 id="另一种比较器Comparator">另一种比较器Comparator</h2><p>如果一个类已经开发完成，但是此类建立的初期并没有实现Comparable接口，此时肯定是无法进行对象排序操作的，为了解决这个问题，Java又定义了另一个比较器操作接口—-Comparator，此接口定义在java.util包中，接口定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Comparator</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">Compare</span><span class="params">(T o1,T o2)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以发现在此接口中定义了一个Comparator方法，此方法接收两个对象，返回值依旧是1、0、-1。</p>
<p>但是，此接口使用与之前不同的是，需要单独指定好一个比较器的比较规则类才可以完成数组的排序，下面我们接着用Student类来做演示。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name, <span class="keyword">int</span> age)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;<span class="comment">//覆写toString</span></span><br><span class="line">		<span class="keyword">return</span> name+<span class="string">"\t\t"</span>+age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span></span>&#123; <span class="comment">//覆写equals方法</span></span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">this</span> == obj)&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(!(obj <span class="keyword">instanceof</span> Student))&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		Student stu = (Student) obj;</span><br><span class="line">		<span class="keyword">if</span>(stu.name.equals(<span class="keyword">this</span>.name) &amp;&amp; stu.age == <span class="keyword">this</span>.age)&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>还需要定义一个比较类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Student</span>&gt;</span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Student o1, Student o2)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(o1.equals(o2))&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;<span class="function"><span class="keyword">else</span> <span class="title">if</span><span class="params">(o1.getAge()</span>&lt;o2.<span class="title">getAge</span><span class="params">()</span>)</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后就可以为对象数组排序了。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Student stu[] = &#123;</span><br><span class="line">				<span class="keyword">new</span> Student(<span class="string">"张三"</span>,<span class="number">20</span>),</span><br><span class="line">				<span class="keyword">new</span> Student(<span class="string">"李四"</span>, <span class="number">24</span>),</span><br><span class="line">				<span class="keyword">new</span> Student(<span class="string">"王五"</span>, <span class="number">21</span>),</span><br><span class="line">				<span class="keyword">new</span> Student(<span class="string">"招六"</span>, <span class="number">25</span>),</span><br><span class="line">				<span class="keyword">new</span> Student(<span class="string">"陈琦"</span>, <span class="number">28</span>),</span><br><span class="line">		&#125;;</span><br><span class="line">		java.util.Arrays.sort(stu,<span class="keyword">new</span> StudentComparator());</span><br><span class="line">		<span class="keyword">for</span>(Student s:stu)&#123;</span><br><span class="line">			System.out.println(s);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>程序运行结果如下：</p>
<p><img src="http://xinjue.qiniudn.com/github/201408/btresault22.jpg" alt="排序结果"></p>
<p>从运行结果看，Comparable和Comparator两个接口都可以实现排序功能，但是与Comparable想必，Comparator接口明显是一种补救的做法。所以，建议大家使用Comparable接口进行排序操作。</p>

          
        
      </div>
    

    
      <div class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/Comparable/">
                #Comparable
              </a>
            
              <a href="/tags/Comparator/">
                #Comparator
              </a>
            
              <a href="/tags/二叉树/">
                #二叉树
              </a>
            
          </div>
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2014/08/15/Grunt快速入门教程/">
                Grunt快速入门教程
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            發表於 2014-08-15
          
        </span>

        
          
            <span class="post-category">
              &nbsp; | &nbsp; 分類於
              
                <a href="/categories/技术储备/">技术储备</a>

                
                

              
            </span>
          
        

        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <h2 id="GRUNT——JavaScript世界的构建工具">GRUNT——JavaScript世界的构建工具</h2><h3 id="为何要用构建工具？">为何要用构建工具？</h3><p>一句话：自动化。对于需要反复重复的任务，例如压缩、编译、单元测试、linting等，自动化工具可以减轻你的劳动，简化你的工作。当你正确配置好了任务，任务运行器就会自动帮你或你的小组完成大部分无聊的工作。</p>
<h3 id="为什么要用Grunt？">为什么要用Grunt？</h3><p>Grunt生态系统非常庞大，并且一直在增长。由于拥有数量庞大的插件可供选择，隐刺，你可以利用Grunt自动完成任何事，并且花费最少的代价。如果找不到你需要的插件，那就自己动手创造一个Grunt插件，然后将其发布到npm上吧。</p>
<h2 id="快速入门">快速入门</h2><p>Grunt和Grunt插件都是通过<a href="https://npmjs.org" target="_blank" rel="external">npm</a>安装并管理的，npm是<a href="nodejs.org">Node.js</a>的包管理器。</p>
<p><em>Grunt 0.4.x 必须配合Node.js &gt;= 0.8.0版本使用。；老版本的 Node.js 被认为是不稳定的开发版。</em></p>
<h3 id="安装_CLI">安装 CLI</h3><p><strong>如果你是从Grunt 0.3 版本升级的，请查看 <a href="http://www.gruntjs.net/docs/upgrading-from-0.3-to-0.4#grunt-0.3-notes" target="_blank" rel="external">Grunt 0.3说明</a></strong></p>
<p>在继续学习前，你需要先将Grunt命令行（CLI）安装到全局环境中。安装时可能需要使用sudo（针对OSX、*nix、BSD等系统中）权限或者作为管理员（对于Windows环境）来执行以下命令。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g grunt-cli</span><br></pre></td></tr></table></figure>
<p>上述命令执行完后，<code>grunt</code> 命令就被加入到你的系统路径中了，以后就可以在任何目录下执行此命令了。</p>
<p>注意，安装<code>grunt-cli</code>并不等于安装了 Grunt！Grunt CLI的任务很简单：调用与<code>Gruntfile</code>在同一目录中 Grunt。这样带来的好处是，允许你在同一个系统上同时安装多个版本的 Grunt。</p>
<p>这样就能让多个版本的 Grunt 同时安装在同一台机器上。</p>
<h3 id="CLI_是如何工作的">CLI 是如何工作的</h3><p>每次运行<code>grunt</code>时，他就利用node提供的<code>require()</code>系统查找本地安装的 Grunt。正是由于这一机制，你可以在项目的任意子目录中运行<code>grunt</code> 。</p>
<p>如果找到一份本地安装的 Grunt，CLI就将其加载，并传递<code>Gruntfile中</code>的配置信息，然后执行你所指定的任务。</p>
<p><em>为了更好的理解 Grunt CLI的执行原理，请<a href="https://github.com/gruntjs/grunt-cli/blob/master/bin/grunt" target="_blank" rel="external">参考源码</a>。其实代码很短！</em></p>
<h3 id="拿一份现有的_Grunt_项目练手">拿一份现有的 Grunt 项目练手</h3><p>假定Grunt CLI已经正确安装，并且已经有一份配置好<code>package.json</code> 和 <code>Gruntfile</code> 文件的项目了，接下来就很容易拿Grunt练手了：</p>
<ol>
<li>将命令行的当前目录转到项目的根目录下。</li>
<li>执行<code>npm install</code>命令安装项目依赖的库。</li>
<li>执行 <code>grunt</code> 命令。</li>
</ol>
<p>OK，就是这么简单。还可以通过<code>grunt --help</code> 命令列出所有已安装的Grunt任务（task），但是一般更建议去查看项目的文档以获取帮助信息。</p>
<h3 id="准备一份新的_Grunt_项目">准备一份新的 Grunt 项目</h3><p>一般需要在你的项目中添加两份文件：<code>package.json</code> 和 <code>Gruntfile</code>。</p>
<ul>
<li>package.json: 此文件被npm用于存储项目的元数据，以便将此项目发布为npm模块。你可以在此文件中列出项目依赖的grunt和Grunt插件，放置于devDependencies配置段内。</li>
<li>Gruntfile: 此文件被命名为 Gruntfile.js 或 Gruntfile.coffee，用来配置或定义任务（task）并加载Grunt插件的。</li>
</ul>
<h4 id="package-json">package.json</h4><p><code>package.json</code>应当放置于项目的根目录中，与<code>Gruntfile</code>在同一目录中，并且应该与项目的源代码一起被提交。在上述目录(<code>package.json</code>所在目录)中运行<code>npm install</code>将依据<code>package.json</code>文件中所列出的每个依赖来自动安装适当版本的依赖。</p>
<p>下面列出了几种为你的项目创建<code>package.json</code>文件的方式：</p>
<ul>
<li>大部分 <code>grunt-init</code> 模版都会自动创建特定于项目的package.json文件。</li>
<li><code>npm init</code>命令会创建一个基本的<code>package.json</code>文件。</li>
<li>复制下面的案例，并根据需要做扩充，参考此<a href="https://npmjs.org/doc/json.html" target="_blank" rel="external">说明</a>.</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  "<span class="attribute">name</span>": <span class="value"><span class="string">"my-project-name"</span></span>,</span><br><span class="line">  "<span class="attribute">version</span>": <span class="value"><span class="string">"0.1.0"</span></span>,</span><br><span class="line">  "<span class="attribute">devDependencies</span>": <span class="value">&#123;</span><br><span class="line">    "<span class="attribute">grunt</span>": <span class="value"><span class="string">"~0.4.1"</span></span>,</span><br><span class="line">    "<span class="attribute">grunt-contrib-jshint</span>": <span class="value"><span class="string">"~0.6.0"</span></span>,</span><br><span class="line">    "<span class="attribute">grunt-contrib-nodeunit</span>": <span class="value"><span class="string">"~0.2.0"</span></span>,</span><br><span class="line">    "<span class="attribute">grunt-contrib-uglify</span>": <span class="value"><span class="string">"~0.2.2"</span></span><br><span class="line">  </span>&#125;</span><br><span class="line"></span>&#125;</span><br></pre></td></tr></table></figure>
<h4 id="安装Grunt_和_grunt插件">安装Grunt 和 grunt插件</h4><p>向已经存在的<code>package.json</code> 文件中添加Grunt和grunt插件的最简单方式是通过<code>npm install &lt;module&gt; --save-dev</code>命令。此命令不光安装了<code>&lt;module&gt;</code>，还会自动将其添加到<a href="https://npmjs.org/doc/json.html#devDependencies" target="_blank" rel="external">devDependencies</a> 配置段中，遵循<a href="https://npmjs.org/doc/misc/semver.html#Ranges" target="_blank" rel="external">tilde version range</a>格式。</p>
<p>例如，下面这条命令将安装Grunt最新版本到项目目录中，并将其添加到devDependencies内:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install grunt --save-dev</span><br></pre></td></tr></table></figure>
<p>同样，grunt插件和其它node模块都可以按相同的方式安装。安装完成后一定要记得将被修改的<code>package.json</code>文件提交到源码管理器中。</p>
<h4 id="Gruntfile">Gruntfile</h4><p><code>Gruntfile.js</code> 或 <code>Gruntfile.coffee</code> 文件是有效的JavaScript 或 CoffeeScript 文件，应当放在你的项目根目录中，和<code>package.json</code>文件在同一目录层级，并和项目源码一起加入源码管理器。</p>
<p>Gruntfile由以下几部分构成：</p>
<ul>
<li>“wrapper” 函数</li>
<li>项目与任务配置</li>
<li>加载grunt插件和任务</li>
<li>自定义任务</li>
</ul>
<h4 id="Gruntfile文件案例">Gruntfile文件案例</h4><p>在下面列出的这个 <code>Gruntfile</code> 中，<code>package.json</code>文件中的项目元数据（metadata）被导入到 Grunt 配置中， grunt-contrib-uglify 插件中的<code>uglify</code>任务（task）被配置为压缩（minify）源码文件并依据上述元数据动态生成一个文件头注释。当在命令行中执行 <code>grunt</code> 命令时，<code>uglify</code> 任务将被默认执行。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span><span class="params">(grunt)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Project configuration.</span></span><br><span class="line">  grunt.initConfig(&#123;</span><br><span class="line">    pkg: grunt.file.readJSON(<span class="string">'package.json'</span>),</span><br><span class="line">    uglify: &#123;</span><br><span class="line">      options: &#123;</span><br><span class="line">        banner: <span class="string">'/*! &lt;%= pkg.name %&gt; &lt;%= grunt.template.today("yyyy-mm-dd") %&gt; */\n'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      build: &#123;</span><br><span class="line">        src: <span class="string">'src/&lt;%= pkg.name %&gt;.js'</span>,</span><br><span class="line">        dest: <span class="string">'build/&lt;%= pkg.name %&gt;.min.js'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 加载包含 "uglify" 任务的插件。</span></span><br><span class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-uglify'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 默认被执行的任务列表。</span></span><br><span class="line">  grunt.registerTask(<span class="string">'default'</span>, [<span class="string">'uglify'</span>]);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>前面已经向你展示了整个 <code>Gruntfile</code>，接下来将详细解释其中的每一部分。</p>
<h4 id="“wrapper”_函数">“wrapper” 函数</h4><p>每一份 <code>Gruntfile</code> （和grunt插件）都遵循同样的格式，你所书写的Grunt代码必须放在此函数内：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span><span class="params">(grunt)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// Do grunt-related things in here</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="项目和任务配置">项目和任务配置</h4><p>大部分的Grunt任务都依赖某些配置数据，这些数据被定义在一个object内，并传递给<code>grunt.initConfig</code>方法。</p>
<p>在下面的案例中，<code>grunt.file.readJSON(&#39;package.json&#39;)</code> 将存储在<code>package.json</code>文件中的JSON元数据引入到grunt config中。 由于<code>&lt;% %&gt;</code>模板字符串可以引用任意的配置属性，因此可以通过这种方式来指定诸如文件路径和文件列表类型的配置数据，从而减少一些重复的工作。</p>
<p>你可以在这个配置对象中(传递给initConfig()方法的对象)存储任意的数据，只要它不与你任务配置所需的属性冲突，否则会被忽略。此外，由于这本身就是JavaScript，你不仅限于使用JSON；你可以在这里使用任意的有效的JS代码。如果有必要，你甚至可以以编程的方式生成配置。</p>
<p>与大多数task一样，grunt-contrib-uglify 插件中的<code>uglify</code> 任务要求它的配置被指定在一个同名属性中。在这里有一个例子, 我们指定了一个<code>banner</code>选项(用于在文件顶部生成一个注释)，紧接着是一个单一的名为<code>build</code>的uglify目标，用于将一个js文件压缩为一个目标文件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Project configuration.</span></span><br><span class="line">grunt.initConfig(&#123;</span><br><span class="line">  pkg: grunt.file.readJSON(<span class="string">'package.json'</span>),</span><br><span class="line">  uglify: &#123;</span><br><span class="line">    options: &#123;</span><br><span class="line">      banner: <span class="string">'/*! &lt;%= pkg.name %&gt; &lt;%= grunt.template.today("yyyy-mm-dd") %&gt; */\n'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    build: &#123;</span><br><span class="line">      src: <span class="string">'src/&lt;%= pkg.name %&gt;.js'</span>,</span><br><span class="line">      dest: <span class="string">'build/&lt;%= pkg.name %&gt;.min.js'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="加载_Grunt_插件和任务">加载 Grunt 插件和任务</h4><p>像 concatenation、minification、grunt-contrib-uglify 和 linting这些常用的任务（task）都已经以grunt插件的形式被开发出来了。只要在 <code>package.json</code> 文件中被列为dependency（依赖）的包，并通过<code>npm install</code>安装之后，都可以在<code>Gruntfile</code>中以简单命令的形式使用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 加载能够提供"uglify"任务的插件。</span></span><br><span class="line">grunt.loadNpmTasks(<span class="string">'grunt-contrib-uglify'</span>);</span><br></pre></td></tr></table></figure>
<p>注意： <code>grunt --help</code> 命令将列出所有可用的任务。</p>
<h4 id="自定义任务">自定义任务</h4><p>通过定义 <code>default</code> 任务，可以让Grunt默认执行一个或多个任务。在下面的这个案例中，执行 <code>grunt</code> 命令时如果不指定一个任务的话，将会执行<code>uglify</code>任务。这和执行<code>grunt uglify</code> 或者 <code>grunt default</code>的效果一样。<code>default</code>任务列表数组中可以指定任意数目的任务（可以带参数）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Default task(s).</span></span><br><span class="line">grunt.registerTask(<span class="string">'default'</span>, [<span class="string">'uglify'</span>]);</span><br></pre></td></tr></table></figure>
<p>如果Grunt插件中的任务（task）不能满足你的项目需求，你还可以在<code>Gruntfile</code>中自定义任务（task）。例如，在下面的 <code>Gruntfile</code> 中自定义了一个<code>default</code> 任务，并且他甚至不依赖任务配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span><span class="params">(grunt)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// A very basic default task.</span></span><br><span class="line">  grunt.registerTask(<span class="string">'default'</span>, <span class="string">'Log some stuff.'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    grunt.log.write(<span class="string">'Logging some stuff...'</span>).ok();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>特定于项目的任务不必在 <code>Gruntfile</code> 中定义。他们可以定义在外部<code>.js</code> 文件中，并通过<code>grunt.loadTasks</code> 方法加载。</p>
<p><a href="http://www.gruntjs.net/docs/getting-started/" target="_blank" rel="external">参考原文地址</a></p>

          
        
      </div>
    

    
      <div class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/Grunt/">
                #Grunt
              </a>
            
              <a href="/tags/教程/">
                #教程
              </a>
            
          </div>
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2014/08/13/IO进阶/">
                IO进阶
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            發表於 2014-08-13
          
        </span>

        
          
        

        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <p>除了上一篇用到的FileOutputStream，FileInputSream，FileWriter，FileReader之外，java还为我们提供了很多IO相关的类，让我们能够在多种情况下方便的使用。</p>
<h3 id="转换流—OutputStreamWriter和InputStreamReader">转换流—OutputStreamWriter和InputStreamReader</h3><ul>
<li>OutputStreamWriter：是Writer的子类，将输出的字符流变为字节流，即将一个字符流的输出对象变为字节流输出对象。</li>
<li>InputStreamReader：是Reader的子类，将输入的字节流变为字符流，即将字节流的输入对象变为字符流的输入对象。</li>
</ul>
<p>OutputStreamWriter和InputStreamReader的构造方法如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">OutputStreamWriter</span><span class="params">(OutputStream out)</span></span><br><span class="line"><span class="keyword">public</span> <span class="title">OutputStreamWriter</span><span class="params">(OutputStream out, Charset cs)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title">InputStreamReader</span><span class="params">(InputStream in)</span></span><br><span class="line"><span class="keyword">public</span> <span class="title">InputStreamReader</span><span class="params">(InputStream in, Charset cs)</span></span></span><br></pre></td></tr></table></figure></p>
<p>由此可看出OutputStreamWriter和InputStreamReader能够指定编码。</p>
<h3 id="管道流">管道流</h3><p>管道流的主要作用是可以进行两个线程间的通信，分为管道输出流(PipedOutputStream)和管道输入流(PipedInputStream)。如果要进行管道输出，则必须把输出流连接在输入流上，在PipedOutputStream类上有如下方法用于连接管道：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connnect</span><span class="params">(PipedInputStream snk)</span> <span class="keyword">throws</span> IOException</span></span><br></pre></td></tr></table></figure></p>
<p>下面来验证一下管道流：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;	<span class="comment">//导包</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Send</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123; <span class="comment">//实现Runnable接口</span></span><br><span class="line">	<span class="keyword">private</span> PipedOutputStream pos = <span class="keyword">null</span>;	<span class="comment">//声明管道输出流</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Send</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.pos = <span class="keyword">new</span> PipedOutputStream();	<span class="comment">//实例化输出流</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">		String str = <span class="string">"Merry, I love U."</span>;</span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.pos.write(str.getBytes());	<span class="comment">//输出信息</span></span><br><span class="line">		&#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.pos.close();	<span class="comment">//关闭输出流</span></span><br><span class="line">		&#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> PipedOutputStream <span class="title">getPos</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> pos;	<span class="comment">//通过线程类得到输出流</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Receive</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> PipedInputStream pis = <span class="keyword">null</span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Receive</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.pis = <span class="keyword">new</span> PipedInputStream();	<span class="comment">//实例化输入流</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">byte</span> b[] = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">		<span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			len = <span class="keyword">this</span>.pis.read(b);	<span class="comment">//接收数据</span></span><br><span class="line">		&#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.pis.close();</span><br><span class="line">		&#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"接收的内容是"</span>+<span class="keyword">new</span> String(b,<span class="number">0</span>,len));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> PipedInputStream <span class="title">getPis</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> pis;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Shen</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Send s = <span class="keyword">new</span> Send();</span><br><span class="line">		Receive r = <span class="keyword">new</span> Receive();</span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			s.getPos().connect(r.getPis()); <span class="comment">//连接管道</span></span><br><span class="line">		&#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">new</span> Thread(s).start();	<span class="comment">//启动线程</span></span><br><span class="line">		<span class="keyword">new</span> Thread(r).start();	<span class="comment">//启动线程</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面的程序定义了两个线程对象，在发送的线程类中定义了管道输出流，在接收的线程类中定义了管道输入流，在操作时只需要使用PipedOutputStream类中提供的connect()方法就可以将两个线程管道连接在一起，线程启动后会自动进行管道的输入、输出操作。</p>
<h3 id="打印流">打印流</h3><p>在整个IO包中，打印流是输出信息最方便的类，主要包含字节打印流(PrintStream)和字符打印流(PrintWriter)。打印流提供非常方便的打印功能，可以打印任何数据类型。下面以字节打印流为例。</p>
<p>PrintStream是OutputStream的子类，常用方法如下表：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>public PrintStream(File file) throws FileNotFoundException</td>
<td>构造</td>
<td>通过一个File对象实例化PrintStream类</td>
</tr>
<tr>
<td>public PrintStream(OutputStream out)</td>
<td>构造</td>
<td>接收OutputStream对象，实例化PrintStream类</td>
</tr>
<tr>
<td>public PrintStream printf(Locale l, String format, Object…args)</td>
<td>普通</td>
<td>根据制定的Locale进行格式化输出</td>
</tr>
<tr>
<td>public PrintStream printf(String format, Object…args)</td>
<td>普通</td>
<td>根据本地环境格式化输出</td>
</tr>
<tr>
<td>public void print(boolean b)</td>
<td>普通</td>
<td>此方法被重载过很多次，输出任意数据</td>
</tr>
<tr>
<td>public void println(boolean b)</td>
<td>普通</td>
<td>此方法被重载过很多次，输出任意数据后换行</td>
</tr>
</tbody>
</table>
<h3 id="System类对IO的支持">System类对IO的支持</h3><p>System表示系统类，在java中System类也对IO给与了一定支持，在System类中定义了下面三个常量，在IO操作中有这非常大的作用。</p>
<table>
<thead>
<tr>
<th>System类的常量</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>public static final PrintStream out</td>
<td>对应系统标准输出，一般是显示器</td>
</tr>
<tr>
<td>public static final PrintStream err</td>
<td>错误信息输出</td>
</tr>
<tr>
<td>public static final PrintStream in</td>
<td>对应着标准输入，一般是键盘</td>
</tr>
</tbody>
</table>
<p>System.out 是PrintStream的对象，PrintStream是OutputStream的子类，因此可以直接利用次对象实例化OutputStream对象，向屏幕输出信息。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SystemDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		OutputStream out = System.out;	<span class="comment">//此时的输出流是向屏幕上输出的</span></span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			out.write(<span class="string">"I love you"</span>.getBytes());</span><br><span class="line">		&#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			out.close();</span><br><span class="line">		&#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="标准键盘输入">标准键盘输入</h3><h4 id="用BufferedReader和System-in输入">用BufferedReader和System.in输入</h4><p>BufferedReader类用于从缓冲区中读取内容，所有的输入字节数据都放在缓冲区中,由其构造方法：<code>public BufferedReader(Reader in)</code>可知其接收一个Reader类的实例。利用BufferedReader和System.in类可以实现一个键盘输入数据的标准格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BufferedReaderDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		BufferedReader br = <span class="keyword">null</span>;	<span class="comment">//声明BufferedReader对象</span></span><br><span class="line">		br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in)); <span class="comment">//实例化BufferedReader</span></span><br><span class="line">		String str = <span class="keyword">null</span>; <span class="comment">//接收输入内容</span></span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			str = buf.readLine();	<span class="comment">//读取输入内容</span></span><br><span class="line">		&#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"输入的内容是："</span>+str);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="用Scanner类输入">用Scanner类输入</h4><p>在JDK1.5之后Java提供了专门的输入数据类，此类不止可以完成输入数据操作，也可以方便的对输入数据进行验证。此类放在java.util包中，常用方法如下表：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>public Scanner(File source) throws FileNotFoundException</td>
<td>构造</td>
<td>从文件中接收</td>
</tr>
<tr>
<td>public Scanner(InputStream source)</td>
<td>构造</td>
<td>从指定字节输入流中接收</td>
</tr>
<tr>
<td>public boolean hasNext(Pattern pattern)</td>
<td>普通</td>
<td>判断输入的数据是否附和指定的正则标准</td>
</tr>
<tr>
<td>public boolean hasNextInt()</td>
<td>—</td>
<td>判断输入的是否是整数</td>
</tr>
<tr>
<td>public boolean hasNextFloat()</td>
<td>—</td>
<td>判断输入的是否是小数</td>
</tr>
<tr>
<td>public String next()</td>
<td>—</td>
<td>接收内容</td>
</tr>
<tr>
<td>public String next(Pattern pattern)</td>
<td>—</td>
<td>接收内容，进行正则验证</td>
</tr>
<tr>
<td>public int nextInt()</td>
<td>—</td>
<td>接收数字</td>
</tr>
<tr>
<td>public float nextFloat()</td>
<td>—</td>
<td>接收小数</td>
</tr>
<tr>
<td>public Scanner useDelimiter(String pattern)</td>
<td>—</td>
<td>设置读取的分隔符</td>
</tr>
</tbody>
</table>
<p>实现数据输入：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScannerDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Scanner sc = <span class="keyword">new</span> Scanner(System.in); <span class="comment">//从键盘接收数据</span></span><br><span class="line">		sc.useDelimiter(<span class="string">"\n"</span>); <span class="comment">//修改输入数据的分隔符</span></span><br><span class="line">		System.out.print(<span class="string">"输入数据："</span>);</span><br><span class="line">		String str = sc.next();</span><br><span class="line">		System.out.println(<span class="string">"输入的数据为："</span>+str);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="复制文件">复制文件</h3><p>看论坛里有的同学们说面试的时候会面到复制文件的问题，在此，我就先写一个范例熟练熟练。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 复制文件</span></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CopyDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">		System.out.println(<span class="string">"请输入源文件路径"</span>);</span><br><span class="line">		String origin = sc.next();</span><br><span class="line">		System.out.println(<span class="string">"请输入目标路径"</span>);</span><br><span class="line">		String target = sc.next();</span><br><span class="line">		sc.close();</span><br><span class="line">		File fo = <span class="keyword">new</span> File(origin);</span><br><span class="line">		File ft = <span class="keyword">new</span> File(target);</span><br><span class="line">		<span class="keyword">if</span>(!fo.exists())&#123;</span><br><span class="line">			System.out.println(<span class="string">"源文件不存在"</span>);</span><br><span class="line">			System.exit(<span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		InputStream input = <span class="keyword">null</span>;</span><br><span class="line">		OutputStream output = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			input = <span class="keyword">new</span> FileInputStream(fo);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			output = <span class="keyword">new</span> FileOutputStream(ft);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(input != <span class="keyword">null</span> &amp;&amp; output!= <span class="keyword">null</span>)&#123;</span><br><span class="line">			<span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="keyword">while</span>((temp = input.read())!= -<span class="number">1</span>)&#123;</span><br><span class="line">					output.write(temp);</span><br><span class="line">				&#125;</span><br><span class="line">				System.out.println(<span class="string">"复制完成"</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">				System.out.println(<span class="string">"复制失败"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				input.close();</span><br><span class="line">				output.close();</span><br><span class="line">			&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果如下图所示：<br><img src="http://xinjue.qiniudn.com/github/201408/copy.jpg" alt="复制成功"></p>

          
        
      </div>
    

    
      <div class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/IO进阶/">
                #IO进阶
              </a>
            
              <a href="/tags/复制文件/">
                #复制文件
              </a>
            
          </div>
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2014/08/08/IO基础/">
                IO基础
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          
            發表於 2014-08-08
          
        </span>

        
          
        

        
          
        
      </div>
    </div>

    
      <div class="post-body">

        
        

        
          
            <h3 id="什么是IO">什么是IO</h3><p>这个IO，是英文Input和Output的首字母缩写，也就是输入/输出。最早接触javaIO的时候会被各种输入输出流搞的头晕眼花。<br>一开始我总是把输入输出的主体当作硬盘，在看了一遍之后，发现了一个方便法门：</p>
<blockquote>
<p>输入/输出都是相对于内存来说的，所有读取到内存的都是Input流，反之则是Output流</p>
</blockquote>
<p>在这样想之后，输入输出流再也没有弄混过。不多说，先上一张全家福：<br><img src="http://xinjue.qiniudn.com/github/201408/javaio1.jpg" alt="javaIO操作类，感谢Xmind的支持"></p>
<h3 id="操作文件的类—-File">操作文件的类—-File</h3><p>整个IO包中，唯一与文件本身相关的类就是File类，下面通过一个例子来说明File类的相关操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;  <span class="comment">// 注意，需要引入需要的包</span></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FileDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		File f1 = <span class="keyword">new</span> File(<span class="string">"d:\\test1.txt"</span>);	<span class="comment">// 这里的两个\\第一个是转义第二个的，当然了，这里最好还是用File.separator</span></span><br><span class="line">		File f2 = <span class="keyword">new</span> File(<span class="string">"d:"</span>+File.separator+<span class="string">"test2.txt"</span>); <span class="comment">// 等效于上一句，推荐这样写</span></span><br><span class="line">		<span class="comment">//创建文件</span></span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			f1.createNewFile();		<span class="comment">//createNewFile方法抛了异常，需要用try...catch</span></span><br><span class="line">		&#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//删除文件</span></span><br><span class="line">		f1.delete();</span><br><span class="line">		<span class="comment">//创建文件夹</span></span><br><span class="line">		f2.mkdir();</span><br><span class="line">		<span class="comment">//list()列出一个目录中的全部内容,返回字符串数组</span></span><br><span class="line">		String str1[] = f2.list();</span><br><span class="line">		<span class="comment">//listFiles()作用同上，不同的是列出的是文件的详细名称(包含路径)</span></span><br><span class="line">		String str2[] = f2.listFiles();</span><br><span class="line">		<span class="comment">//判断一个给定的路径是不是目录,返回布尔型值</span></span><br><span class="line">		f2.isDirectory();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>好，介绍完File类，接下来我们可以了解一下IO流的基本操作了</p>
<h3 id="IO流的基本操作">IO流的基本操作</h3><p>在程序中所有的数据都是以流的方式进行传输或保存的，程序需要数据是要使用输入流读取数据，而当程序需要将一些数据保存起来的时候，就要使用输出流。<br>在java中IO操作的主要流程如下：</p>
<ol>
<li>使用File类打开一个文件。</li>
<li>通过字节流或字符流的子类指定输出的位置</li>
<li>进行读/写操作</li>
<li>关闭输入/输出流</li>
</ol>
<h3 id="字节流">字节流</h3><p>字节流主要操作byte类型数据，以byte数组为准，主要操作类为OutputStream和InputStream。</p>
<h4 id="字节输出流">字节输出流</h4><p>OutputStream是整个IO包中字节输出流的最大父类，此类的定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">OutputStream</span> <span class="keyword">extends</span> <span class="title">Object</span> <span class="keyword">implements</span> <span class="title">Closeable</span>, <span class="title">Flushable</span></span></span><br></pre></td></tr></table></figure>
<p>由此可知，OutputStream是一个抽象类，要使用此类，需通过其子类来实例化，这里以FileOutputStream为例。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*; <span class="comment">//引入io包</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OutputStreamDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;<span class="comment">//此处为了举例方便(其实就是我懒得搞那么多try-catch了),在主函数抛出异常，不处理</span></span><br><span class="line">		<span class="comment">//第一步，使用File找到一个文件，如果不存在，则自动创建</span></span><br><span class="line">		File f = <span class="keyword">new</span> File(<span class="string">"d:"</span>+File.separator+<span class="string">"test.txt"</span>);	<span class="comment">//声明File对象</span></span><br><span class="line">		<span class="comment">// 第二步，通过子类实例化OutputStream对象</span></span><br><span class="line">		OutputStream os = <span class="keyword">null</span>;	<span class="comment">//准备好一个OutputStream流对象</span></span><br><span class="line">		os = <span class="keyword">new</span> FileOutputStream(f);	<span class="comment">//通过多态性，子类实例化父类对象</span></span><br><span class="line">		<span class="comment">//第三步，进行写操作</span></span><br><span class="line">		String str = <span class="string">"I LOVE U"</span>;	<span class="comment">//准备一个字符串</span></span><br><span class="line">		<span class="keyword">byte</span> b[] = str.getBytes();	<span class="comment">//将字符串转换成字符数组</span></span><br><span class="line">		os.write(b);	<span class="comment">//将内容写到文件</span></span><br><span class="line">		<span class="comment">//第四步，关闭输出流</span></span><br><span class="line">		os.close();	<span class="comment">//关闭</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面代码每次执行，都会覆盖文件里的内容，如果要追加内容，需要用FileOutputStream的另一个构造方法来实例化</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第二步，子类实例化父类对象</span></span><br><span class="line">OutputStream os = <span class="keyword">new</span> FileOutputStream(f, <span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>
<h4 id="字节输入流">字节输入流</h4><p>既然程序可以向文件写入内容，也可以通过InputStream从文件读取内容。InputStream类的定义如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">InputStream</span> <span class="keyword">extends</span> <span class="title">Object</span> <span class="keyword">implements</span> <span class="title">Closeable</span></span></span><br></pre></td></tr></table></figure></p>
<p>跟OutputStream一样，InputStream本身也是抽象类，必须依靠子类来实例化，这里我们用FileInputSream举例。<br>从文件中读取内容：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;   <span class="comment">//导包是第一要务</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InputStreamDemo1</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;<span class="comment">//接着省懒事儿，不处理异常</span></span><br><span class="line">        <span class="comment">//第一步，使用File类找到一个文件</span></span><br><span class="line">        File f = <span class="keyword">new</span> File(<span class="string">"d:"</span>+File.separator+<span class="string">"test.txt"</span>);</span><br><span class="line">        <span class="comment">//第二步，通过子类实例化父类对象</span></span><br><span class="line">        InputStream input = <span class="keyword">null</span>;</span><br><span class="line">        input = <span class="keyword">new</span> FileInputStream(f);</span><br><span class="line">        <span class="comment">//第三步，进行读操作</span></span><br><span class="line">        <span class="keyword">byte</span> b[] = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];  <span class="comment">//把所有内容读取到此数组中</span></span><br><span class="line">        input.read(b);  <span class="comment">//读</span></span><br><span class="line">        <span class="comment">//第四步，关闭输入流</span></span><br><span class="line">        input.close();</span><br><span class="line">        System.out.println(<span class="string">"内容是："</span>+<span class="keyword">new</span> String(b));<span class="comment">//把byte数组变为字符串输出</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>运行上面程序，发现文件内容已经被读取进来了，但是后面会有很多空格，这是因为开辟的byte数组大小为1024，但是实际的内容「I LOVE U」只有8个字节，所以后面会跟着很多空格。为了去掉后面的空格，对程序做出如下修改：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*经过观察read方法，发现有一个返回值，此值表示向数组中写入了多少个数据*/</span></span><br><span class="line"><span class="comment">//修改后的第三步</span></span><br><span class="line"><span class="keyword">byte</span> b[] = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line"><span class="keyword">int</span> len = input.read(b); <span class="comment">//读出内容，并接受其返回值</span></span><br><span class="line"><span class="comment">//在输出内容的时候，修改为</span></span><br><span class="line">System.out.println(<span class="string">"内容："</span>+<span class="keyword">new</span> String(b,<span class="number">0</span>,len));</span><br></pre></td></tr></table></figure></p>
<p>这样就能把后面的空格去掉。<br>需要注意的是：<strong>在使用FileInputSream读取时如果指定的路径不存在，则程序运行会出现异常</strong><br>上面的代码要通过byte数组接收全部内容，所以如果文件内容小的话，则会造成很多空间浪费，此时我们观 察File类，存在一个length()的方法，此方法可以得到文件的大小，so：另外一个套路，不同的地方依旧在第三步<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改的第三步,通过文件长度f.length()来创建byte数组</span></span><br><span class="line"><span class="keyword">byte</span> b[] = <span class="keyword">new</span> <span class="keyword">byte</span>[f.length()];</span><br><span class="line">input.read(b);</span><br></pre></td></tr></table></figure></p>
<p>以上都是对付已知大小的文件，如果有一个文件，大小未知，则可以通过判断是否读到了文件末尾的方式来读取文件。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第三步修改，当input.read(f)返回值是-1时，表示文件读到了结尾。</span></span><br><span class="line"><span class="keyword">int</span> len =<span class="number">0</span>;	<span class="comment">//用于记录读取数据的个数</span></span><br><span class="line"><span class="keyword">byte</span> b[] = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line"><span class="keyword">int</span> temp = <span class="number">0</span>;	<span class="comment">//接收读取的每一个内容</span></span><br><span class="line"><span class="keyword">while</span>((temp = input.read(b)) != -<span class="number">1</span>)&#123;</span><br><span class="line">	<span class="comment">//将每次读取的内容给temp，如果temp!=-1，表示文件没有读完</span></span><br><span class="line">	b[len] = (<span class="keyword">byte</span>)temp;</span><br><span class="line">	len++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="字符流">字符流</h3><p>在程序中，一个字符等于两个字节，java提供了Reader和Writer两个操作类来进行字符流操作。</p>
<h4 id="字符输出流_Writer">字符输出流 Writer</h4><p>Writer是一个字符流的输出类，此类定义如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Writer</span> <span class="keyword">extends</span> <span class="title">Object</span> <span class="keyword">implements</span> <span class="title">Appendable</span>,<span class="title">Closeable</span>,<span class="title">Flushable</span></span></span><br></pre></td></tr></table></figure></p>
<p>可知本类也是一个抽象类，需要通过子类FileWriter来实例化，代码如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WriterDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> thows Exception</span>&#123;<span class="comment">//异常抛抛抛，哇咔咔</span></span><br><span class="line">		<span class="comment">//第一步，依旧是使用File类找到一个文件</span></span><br><span class="line">		File f = <span class="keyword">new</span> File(<span class="string">"d:"</span>+File.separator+<span class="string">"test.txt"</span>);</span><br><span class="line">		<span class="comment">//第二步，子类实例化父类对象</span></span><br><span class="line">		Writer out = <span class="keyword">null</span>;</span><br><span class="line">		out = <span class="keyword">new</span> FileWriter(f);</span><br><span class="line">		<span class="comment">//第三步，进行写操作</span></span><br><span class="line">		String str = <span class="string">"abcdefg"</span>;	<span class="comment">//准备一个字符串</span></span><br><span class="line">		out.write(str);</span><br><span class="line">		<span class="comment">//第四步，关闭输出流</span></span><br><span class="line">		out.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>不难发现，字符输出流和字节输出流几乎没有差别，同样，如果要追加内容，则在实例化输出流对象的时候，将其设置为可追加<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改第二步</span></span><br><span class="line">out = <span class="keyword">new</span> FileWriter(f, <span class="keyword">true</span>);</span><br></pre></td></tr></table></figure></p>
<h4 id="字符数如流_Reader">字符数如流 Reader</h4><p>Reader是使用字符的方式从文件中读取出数据，Reader类的定义如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Reader</span> <span class="keyword">extends</span> <span class="title">Object</span> <span class="keyword">implements</span> <span class="title">Readable</span>, <span class="title">Closeable</span></span></span><br></pre></td></tr></table></figure></p>
<p>Reader本身也是抽象类，我们使用子类FileReader来实例化对象。从文件中读取内容，示例代码如下，这里使用循环读取的方式：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;   <span class="comment">//导包啊导包</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReaderDemo</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;<span class="comment">//接着省懒事儿，不处理异常</span></span><br><span class="line">        <span class="comment">//第一步，使用File类找到一个文件</span></span><br><span class="line">        File f = <span class="keyword">new</span> File(<span class="string">"d:"</span>+File.separator+<span class="string">"test.txt"</span>);</span><br><span class="line">        <span class="comment">//第二步，通过子类实例化父类对象</span></span><br><span class="line">        Reader reader = <span class="keyword">null</span>;</span><br><span class="line">        reader = <span class="keyword">new</span> FileReader(f);</span><br><span class="line">        <span class="comment">//第三步，进行读操作</span></span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;	<span class="comment">//用来记录文件长度</span></span><br><span class="line">        <span class="keyword">char</span> ch[] = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>];  <span class="comment">//把所有内容读取到此数组中</span></span><br><span class="line">        <span class="keyword">int</span> temp = <span class="number">0</span>;	<span class="comment">//接收读取的每一个内容</span></span><br><span class="line">        <span class="keyword">while</span>((temp = reader.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">        	ch[len] = (<span class="keyword">char</span>)temp;</span><br><span class="line">        	len++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//第四步，关闭输入流</span></span><br><span class="line">        reader.close();</span><br><span class="line">        System.out.println(<span class="string">"内容是："</span>+<span class="keyword">new</span> String(ch,<span class="number">0</span>,len));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="字节流和字符流的区别">字节流和字符流的区别</h3><p>字节流和字符流的使用非常相似，晾着除了操作代码上的不同之外，还有一个显著的不同点，那就是：字节流在操作的时候本身不会用到缓存区，而字符流操作时使用的缓存区，下面用代码验证这一点：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*; <span class="comment">//引入io包</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OutputStreamDemo</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;<span class="comment">//此处为了举例方便(其实就是我懒得搞那么多try-catch了),在主函数抛出异常，不处理</span></span><br><span class="line">        <span class="comment">//第一步，使用File找到一个文件，如果不存在，则自动创建</span></span><br><span class="line">        File f = <span class="keyword">new</span> File(<span class="string">"d:"</span>+File.separator+<span class="string">"test.txt"</span>);  <span class="comment">//声明File对象</span></span><br><span class="line">        <span class="comment">// 第二步，通过子类实例化OutputStream对象</span></span><br><span class="line">        OutputStream os = <span class="keyword">null</span>; <span class="comment">//准备好一个OutputStream流对象</span></span><br><span class="line">        os = <span class="keyword">new</span> FileOutputStream(f);   <span class="comment">//通过多态性，子类实例化父类对象</span></span><br><span class="line">        <span class="comment">//第三步，进行写操作</span></span><br><span class="line">        String str = <span class="string">"I LOVE U"</span>;    <span class="comment">//准备一个字符串</span></span><br><span class="line">        <span class="keyword">byte</span> b[] = str.getBytes();  <span class="comment">//将字符串转换成字符数组</span></span><br><span class="line">        os.write(b);    <span class="comment">//将内容写到文件</span></span><br><span class="line">        <span class="comment">//第四步，关闭输出流</span></span><br><span class="line">        <span class="comment">// os.close(); </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面代码注释掉了关闭流这一步操作，通过查看文件可知，虽然没有关闭输出流，但是文件中已经存在了输出的内容。接下来看一看字符流操作：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WriterDemo</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> thows Exception</span>&#123;<span class="comment">//异常抛抛抛，哇咔咔</span></span><br><span class="line">        <span class="comment">//第一步，依旧是使用File类找到一个文件</span></span><br><span class="line">        File f = <span class="keyword">new</span> File(<span class="string">"d:"</span>+File.separator+<span class="string">"test.txt"</span>);</span><br><span class="line">        <span class="comment">//第二步，子类实例化父类对象</span></span><br><span class="line">        Writer out = <span class="keyword">null</span>;</span><br><span class="line">        out = <span class="keyword">new</span> FileWriter(f);</span><br><span class="line">        <span class="comment">//第三步，进行写操作</span></span><br><span class="line">        String str = <span class="string">"abcdefg"</span>; <span class="comment">//准备一个字符串</span></span><br><span class="line">        out.write(str);</span><br><span class="line">        <span class="comment">//第四步，关闭输出流</span></span><br><span class="line">        <span class="comment">//out.close();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>依旧是注释掉第四步，打开文件会发现文件是空的，没有内容输出到文件。这是因为字符流操作时使用了缓冲区，在关闭字符流时会强制性的将缓冲区中的内容进行输出，但是如果没有关闭，则缓冲区的内容无法输出。</p>
<p>如果既不想关闭字符流，又想把内容输出，需要用到Writer类的flush()方法来强制清空缓冲区。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WriterDemo</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> thows Exception</span>&#123;<span class="comment">//异常抛抛抛，哇咔咔</span></span><br><span class="line">        <span class="comment">//第一步，依旧是使用File类找到一个文件</span></span><br><span class="line">        File f = <span class="keyword">new</span> File(<span class="string">"d:"</span>+File.separator+<span class="string">"test.txt"</span>);</span><br><span class="line">        <span class="comment">//第二步，子类实例化父类对象</span></span><br><span class="line">        Writer out = <span class="keyword">null</span>;</span><br><span class="line">        out = <span class="keyword">new</span> FileWriter(f);</span><br><span class="line">        <span class="comment">//第三步，进行写操作</span></span><br><span class="line">        String str = <span class="string">"abcdefg"</span>; <span class="comment">//准备一个字符串</span></span><br><span class="line">        out.write(str);</span><br><span class="line">        <span class="comment">//强制清空缓冲区</span></span><br><span class="line">        out.flush();</span><br><span class="line">        <span class="comment">//第四步，关闭输出流</span></span><br><span class="line">        <span class="comment">//out.close();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      </div>
    

    
      <div class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/IO/">
                #IO
              </a>
            
          </div>
        

        

        
        
          <div class="post-eof"></div>
        
      </div>
    
  </div>


  

          </div>

          
            <div class="pagination">
              <a class="extend prev" rel="prev" href="/">&laquo;</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">&raquo;</a>
            </div>
          
        </div>

        
<div class="sidebar-toggle">
  <div class="sidebar-toggle-line-wrap">
    <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
  </div>
</div>

<div id="sidebar" class="sidebar">
  <div class="sidebar-inner">

    

    <div class="site-overview">
      <div class="site-author motion-element">
        <img class="site-author-image" src="/images/default_avatar.jpg" alt="Yantong Wang" />
        <p class="site-author-name">Yantong Wang</p>
      </div>
      <p class="site-description motion-element"></p>
      <div class="site-state motion-element">
        <div class="site-state-item site-state-posts">
          <a href="/archives">
            <span class="site-state-item-count">26</span>
            <span class="site-state-item-name">文章</span>
          </a>
        </div>

        <div class="site-state-item site-state-categories">
          
            <span class="site-state-item-count">3</span>
            <span class="site-state-item-name">分類</span>
          
        </div>

        <div class="site-state-item site-state-tags">
          <a href="/tags">
            <span class="site-state-item-count">38</span>
            <span class="site-state-item-name">標籤</span>
          </a>
        </div>

      </div>

      

      <div class="links-of-author motion-element">
        
      </div>

      
      

    </div>

    

  </div>
</div>


      </div>
    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp; 
  2015
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">Yantong Wang</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 強力驅動
</div>

<div class="theme-info">
  主題 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $('.content img').each(function () {
        var $image = $(this);
        var $imageWrapLink = $image.parent('a');

        if ($imageWrapLink.size() < 1) {
          $imageWrapLink = $image.wrap('<a href="' + this.getAttribute('src') + '"></a>').parent('a');
        }
        $imageWrapLink.addClass('fancybox');
      });
    });
    $('.fancybox').fancybox({
      helpers: {
        overlay: {
          locked: false
        }
      }
    });
  </script>


  <script type="text/javascript">
  function hasMobileUA () {
    var nav = window.navigator;
    var ua = nav.userAgent;
    var pa = /iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g;

    return pa.test(ua);
  }

  function isDesktop () {
    return screen.width > 991 && !hasMobileUA();
  }

  function isTablet () {
    return screen.width < 992 && screen.width > 767 && hasMobileUA();
  }

  function isMobile () {
    return screen.width < 767 && hasMobileUA();
  }

  function escapeSelector (selector) {
    return selector.replace(/[!"$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g, "\\$&")
  }
</script>

  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" id="motion.global">
  $(document).ready(function () {
    var body = $('body');
    var isSidebarVisible = false;
    var sidebarToggle = $('.sidebar-toggle');
    var sidebarToggleLine1st = $('.sidebar-toggle-line-first')
    var sidebarToggleLine2nd = $('.sidebar-toggle-line-middle');
    var sidebarToggleLine3rd = $('.sidebar-toggle-line-last');
    var sidebar = $('.sidebar');

    var SIDEBAR_WIDTH = '320px';
    var SIDEBAR_DISPLAY_DURATION = 300;

    var sidebarToogleLineStatusInit = {width: '100%', opacity: 1, left: 0, rotateZ: 0, top: 0};

    var sidebarToggleLine1stStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine1stStatusArrow = {width: '50%', rotateZ: '-45deg', top: '2px'};
    var sidebarToogleLine1stStatusClose = {width: '100%', rotateZ: '-45deg', top: '5px'};

    var sidebarToggleLine2ndStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine2ndStatusArrow = {width: '90%'};
    var sidebarToogleLine2ndStatusClose = {opacity: 0};

    var sidebarToggleLine3rdStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine3rdStatusArrow = {width: '50%', rotateZ: '45deg', top: '-2px'};
    var sidebarToogleLine3rdStatusClose = {width: '100%', rotateZ: '45deg', top: '-5px'};

    LogoAndMenuMotion();
    sidebatToggleMotion();
    postsListMotion();
    backToTopMotion();


    $(document)
      .on('sidebar.isShowing', function () {
        isDesktop() && body.velocity(
          {paddingRight: SIDEBAR_WIDTH},
          SIDEBAR_DISPLAY_DURATION
        );
        sidebarContentMotion();
      })
      .on('sidebar.isHiding', function () {});

    function LogoAndMenuMotion() {
      $.Velocity.RunSequence([
        { e: $('.brand'), p: { opacity: 1 }, o: { duration: 100 } },
        { e: $('.logo'), p: { opacity: 1, top: 0 }, o: { duration: 50} },
        
        { e: $('.logo-line-before i'), p: { translateX: "100%" }, o: { duration: 500, sequenceQueue: false } },
        { e: $('.logo-line-after i'), p: { translateX: "-100%" }, o: { duration: 500, sequenceQueue: false } },
        
        { e: $('.site-title'), p: { opacity: 1, top: 0 }, o: { duration: 200 } }
      ]);
      $('.menu-item').velocity('transition.slideDownIn', {display: null});
    }


    function backToTopMotion () {
      var b2top = $('.back-to-top');
      b2top.on('click', function () {
        body.velocity('scroll');
      });
    }

    function sidebarShowMotion () {

      sidebarToggleLine1st.velocity(sidebarToogleLine1stStatusClose);
      sidebarToggleLine2nd.velocity(sidebarToogleLine2ndStatusClose);
      sidebarToggleLine3rd.velocity(sidebarToogleLine3rdStatusClose);

      sidebar.velocity({width: SIDEBAR_WIDTH}, {
        display: 'block',
        duration: SIDEBAR_DISPLAY_DURATION,
        complete: function () {
          sidebar.addClass('sidebar-active');
          sidebar.trigger('sidebar.didShow');
        }
      });
      sidebar.trigger('sidebar.isShowing');
    }

    function sidebarHideMotion () {
      isDesktop() && body.velocity({paddingRight: 0});
      sidebar.velocity('reverse');

      sidebarToggleLine1st.velocity(sidebarToggleLine1stStatusInit);
      sidebarToggleLine2nd.velocity(sidebarToggleLine2ndStatusInit);
      sidebarToggleLine3rd.velocity(sidebarToggleLine3rdStatusInit);

      sidebar.removeClass('sidebar-active');
      sidebar.trigger('sidebar.isHiding');
    };

    function sidebarContentMotion () {
      $('.sidebar .motion-element').velocity(
        'transition.slideRightIn',
        {stagger: 50, drag: true}
      );
    }

    function postsListMotion () {
      var postMotionOptions = window.postMotionOptions || {stagger: 300, drag: true};
      $('.post').velocity('transition.slideDownIn', postMotionOptions);
    }

    function sidebatToggleMotion () {
      sidebarToggle.on('click', function () {
        isSidebarVisible ? sidebarHideMotion() : sidebarShowMotion();
        isSidebarVisible = !isSidebarVisible;
      });

      sidebarToggle.hover(function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusArrow);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusArrow);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusArrow);
      }, function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusInit);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusInit);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusInit);
      });
    }
  });

</script>





  

  

  
  

  


  
</body>
</html>
